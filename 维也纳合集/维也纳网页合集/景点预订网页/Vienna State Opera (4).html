<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Vienna State Opera | Tickets & Booking</title>
  <meta name="description" content="Ticketing page for Vienna State Opera with opening times, date & time picker, ticket selection, and checkout summary.">

  <style>
    /* ‰∏ªÈ¢òÔºàËìùÈáëÂè§ÂÖ∏Ôºâ */
    :root{
      --ink:#0d1b2a;
      --navy:#16324f;
      --navy-d:#0f2740;
      --gold:#caa24a;
      --gold-d:#a88735;
      --sand:#f6f1e4;
      --cream:#fffaf0;
      --line:#e8e1d2;
      --accent:#d14b3d;
      --shadow: 0 10px 24px rgba(13,27,42,.12);
    }

    *{ box-sizing: border-box; }
    html, body{ margin:0; padding:0; }
    body{
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
      color: var(--ink);
      background: var(--sand);
    }
    a{ color: var(--navy); text-decoration: none; }
    a:hover{ text-decoration: underline; }

    .container{ max-width: 1120px; margin: 0 auto; padding: 0 16px; }
    header{ position: sticky; top:0; z-index: 10; backdrop-filter: saturate(160%) blur(6px); background: rgba(246,241,228,.85); border-bottom: 1px solid var(--line); }
    .nav{ height: 56px; display:flex; align-items:center; justify-content:space-between; }
    .brand{ display:flex; align-items:center; gap:10px; font-weight:900; letter-spacing:.3px; color: var(--navy); }
    .brand .mark{ width:12px; height:12px; border-radius:50%; background: radial-gradient(circle at 35% 35%, #f7e9b0, var(--gold)); box-shadow: 0 0 0 3px #f1e6c8 inset; }

    main section{ padding: 36px 0; border-bottom: 1px solid var(--line); }
    .section-title{ display:flex; align-items:center; gap:10px; color: var(--gold-d); font-weight:800; letter-spacing:.2px; font-size:24px; line-height:1.25; }
    .section-title .dot{ width:12px; height:12px; border-radius:50%; background: var(--gold); box-shadow: 0 0 0 3px #f6e9c9 inset; }
    .section-box > .container{ background: var(--cream); border:1px solid var(--line); border-radius:14px; box-shadow: var(--shadow); padding:14px 16px; }

    /* È°∂ÈÉ®Ê®™ÂπÖ */
    .cover{
      position:relative;
      border-bottom:1px solid var(--line);
      background:
        linear-gradient(180deg, rgba(15,39,64,.55) 0%, rgba(15,39,64,.65) 100%),
        url('https://raw.githubusercontent.com/HuaqingYuan1/my-html-demo/main/cover4.jpg') center/cover no-repeat;
      color:#fff;
    }
    .cover .container{
      padding: 64px 16px 96px;
      min-height: 240px;
      display:flex; flex-direction:column; justify-content:center; align-items:center; text-align:center;
    }
    .cover .title{ margin:0 0 10px; font-size: 44px; line-height:1.15; font-family: Georgia, "Times New Roman", serif; text-shadow: 0 3px 8px rgba(0,0,0,.35); }
    .cover .subtitle{ margin:0; opacity:.98; font-weight:700; }

    /* Ê†ÖÊ†º‰∏éÂç°Áâá */
    .grid{ display:grid; grid-template-columns: repeat(12, 1fr); gap: 16px; }
    .col-7{ grid-column: span 7; }
    .col-5{ grid-column: span 5; }
    .col-6{ grid-column: span 6; }
    .col-4{ grid-column: span 4; }
    .col-12{ grid-column: span 12; }
    @media (max-width: 900px){ .grid{ grid-template-columns: repeat(6, 1fr); } .col-7,.col-5,.col-6,.col-4{ grid-column: span 6; } }

    .card{ background: var(--cream); border:1px solid var(--line); border-radius: 14px; overflow:hidden; box-shadow: var(--shadow); }
    .card .head{ padding: 14px 16px; background: linear-gradient(180deg, #fff 0%, #fff7e1 100%); border-bottom:1px solid var(--line); display:flex; align-items:center; gap:12px; }
    .card .head .badge{ display:inline-flex; align-items:center; height:24px; padding:0 10px; border-radius:999px; background: var(--navy); color:#fff; font-weight:800; font-size:12px; letter-spacing:.3px; text-transform:uppercase; }
    .card .head h3{ margin:0; font-size:18px; color: var(--navy); }
    .card .body{ padding: 14px 16px; }

    /* Â∞èÊèêÁ§∫‰∏éË≠¶Á§∫ */
    .notice{ border:1px solid var(--line); border-radius:10px; background:#fff; padding:10px 12px; }
    .notice .title{ display:flex; align-items:center; gap:8px; font-weight:800; color: var(--gold-d); }
    .warn-line{ display:flex; align-items:flex-start; gap:8px; padding:8px 10px; border:1px dashed #e6d9b8; background:#fffdf1; border-radius:10px; }
    .hint{ color:#6a778d; font-weight:600; font-style: italic; }

    /* Êó•ÂéÜ‰∏éÊó∂ÊÆµ */
    .calendar{ display:grid; grid-template-columns: repeat(7, 1fr); gap:6px; }
    .calendar .day{ height:36px; border:1px solid var(--line); background:#fff; border-radius:8px; font-weight:800; display:flex; align-items:center; justify-content:center; cursor:pointer; }
    .calendar .day.disabled{ color:#9aa2ad; background:#f8f6ee; cursor:not-allowed; }
    .calendar .day.selected{ background: var(--navy); color:#fff; border-color: var(--navy); }
    .times{ display:flex; flex-wrap:wrap; gap:8px; }
    .time{ height:34px; padding:0 10px; border:1px solid var(--line); border-radius:10px; background:#fff; cursor:pointer; font-weight:800; }
    .time.selected{ background: var(--navy); color:#fff; border-color: var(--navy); }

    /* Á•®ÁßçË°å */
    .row{ display:flex; align-items:center; justify-content:space-between; padding:10px 0; border-bottom:1px dashed var(--line); }
    .row:last-child{ border-bottom:none; }
    .price{ font-weight:800; color: var(--navy); }
    .qty{ display:flex; align-items:center; gap:8px; }
    .qty input{ width:44px; text-align:center; padding:8px 6px; border-radius:10px; border:1px solid var(--line); background:#fff; font-weight:700; }
    input[type=number]::-webkit-outer-spin-button,
    input[type=number]::-webkit-inner-spin-button{ -webkit-appearance:none; margin:0; }
    input[type=number]{ -moz-appearance: textfield; appearance: textfield; }
    .btn-ghost{ height:34px; padding:0 10px; border-radius:10px; border:1px solid var(--line); background:#fff; cursor:pointer; font-weight:800; }
    .btn-ghost:hover{ background:#fdf7d7; border-color:#f1e2a5; }

    /* ÊëòË¶Å‰∏é‰∏ãÂçï */
    .summary .total{ display:flex; align-items:center; justify-content:space-between; padding-top:10px; margin-top:10px; border-top:1px solid var(--line); font-weight:900; color: var(--navy); }
    .left{ margin-left:8px; color: var(--gold-d); font-weight:700; }
    .actions{ display:flex; gap:10px; }
    .btn{ height:40px; padding:0 16px; border:none; border-radius:10px; font-weight:900; cursor:pointer; }
    .btn.primary{ background: var(--navy); color:#fff; }
    .btn.primary:disabled{ background:#9a9fa8; cursor:not-allowed; }
    .btn.reset{ background:#fff; color: var(--navy); border:1px solid var(--line); }
    .btn.reset:hover{ background:#fdf7d7; border-color:#f1e2a5; }

    /* Ê®°ÊÄÅÊ°Ü */
    .modal{ position:fixed; inset:0; background: rgba(13,27,42,.55); display:none; align-items:center; justify-content:center; z-index: 100; }
    .modal .box{ width: min(560px, 92vw); background:#fff; border:1px solid var(--line); border-radius:14px; box-shadow: var(--shadow); overflow:hidden; }
    .modal .box .head{ display:flex; align-items:center; justify-content:space-between; padding:12px 16px; border-bottom:1px solid var(--line); background: linear-gradient(180deg, #fff 0%, #fff7e1 100%); }
    .modal .box .head h4{ margin:0; }
    .modal .box .body{ padding:14px 16px; }
    .modal .box .item{ display:flex; align-items:center; justify-content:space-between; padding:8px 0; border-bottom:1px dashed var(--line); }
    .modal .box .item:last-child{ border-bottom:none; }
    .modal .close{ background:transparent; border:0; font-size:22px; cursor:pointer; }

    /* ËØ≠Ë®ÄÂç°ÁâáÊåâÈíÆÔºàÊñ∞Â¢ûÔºâ */
    .lang-grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:16px}
    .lang-card{border:1px solid var(--line);border-radius:12px;padding:16px;background:#fff;cursor:pointer}
    .lang-card.selected{border-color:var(--accent);box-shadow:0 0 0 2px var(--accent) inset;background:#fffafa}
    .lang-card .title{font-weight:800;font-size:18px;margin-bottom:6px;color:var(--navy)}
    .lang-card .desc{opacity:.9;line-height:1.6}
    @media (max-width:900px){.lang-grid{grid-template-columns:1fr}}

    .cal-head{
    display:grid; grid-template-columns:repeat(7,1fr); gap:6px; 
    margin-bottom:6px; font-weight:900; color:var(--navy); opacity:.9;
    }
    .cal-head > div{ text-align:center; }

    .time.soldout{
    border-style:dashed; color:#9aa2ad; cursor:not-allowed; position:relative; background:#f3f6f9;
    }
    .time.soldout .so{
    margin-left:8px; font-size:12px; font-weight:800; letter-spacing:.2px;
    padding:2px 6px; border-radius:999px; border:1px solid #cfd7e3;
    }

    .info-banner{
    background:#eaf4ff; color:#0f2740; border:1px solid #d3e5ff;
    padding:10px 12px; border-radius:12px; font-weight:700;
    }
    .ticket-list{ margin-top:12px; }
    .t-item{ display:flex; align-items:center; justify-content:space-between; padding:14px 0; border-bottom:1px solid var(--line); }
    .t-left{ max-width:60%; }
    .t-name{ font-weight:900; }
    .t-note{ color:#5f7790; font-size:14px; margin-top:4px; display:flex; gap:6px; }
    .t-right{ display:flex; align-items:center; gap:18px; }
    .t-price{ font-weight:900; color:#0f2740; min-width:90px; text-align:right; }
    .t-price.free{ color:#2a8f3a; }
    .t-qty{ display:flex; align-items:center; gap:8px; }
    .pill{ width:36px; height:36px; border-radius:999px; border:1px solid #d0d7e2; background:#fff; cursor:pointer; font-weight:900; }
    .pill:hover{ background:#f5f8ff; }
    .count input{ width:56px; height:36px; border:1px solid #d0d7e2; border-radius:10px; text-align:center; font-weight:800; }

    /* Êó•ÂéÜÂ§ñÂ£≥ÁöÑÊ†áÈ¢òÊù° & ÊòüÊúüË°å */
    .cal-nav{
    display:grid; grid-template-columns:48px 1fr 48px; align-items:center;
    gap:10px; padding:10px; margin-bottom:8px;
    background:#eef6ff; border:1px solid #d7e6ff; border-radius:14px;
    }
    .cal-title{ text-align:center; font-weight:900; font-size:20px; color:#16324f; }
    .cal-nav-btn{
    height:36px; border-radius:10px; border:1px solid #d7e6ff; background:#fff; cursor:not-allowed; /* Âè™Êúâ8ÊúàÔºåÁ¶ÅÁî® */
    font-size:18px; color:#16324f;
    }
    .cal-head{
    display:grid; grid-template-columns:repeat(7,1fr); gap:6px; margin:8px 0 6px;
    font-weight:900; color:var(--navy); opacity:.9; text-align:center;
    }
    .cal-head > div{
    padding:10px 0; border:1px solid #e8f0ff; background:#f6fbff; border-radius:10px;
    }

    .lang-info {
    margin-top: 12px;
    padding: 10px 12px;
    background: #f9f9f9;
    border: 1px solid #eaeaea;
    border-radius: 8px;
    }

    .lang-info .hint {
    font-weight: 600;
    color: #16324f;
    margin-bottom: 8px;
    }

    .lang-info .desc {
    font-size: 14px;
    line-height: 1.6;
    color: #555;
    margin: 0;
    }

    .lang-notice {
    margin-top: 14px;
    padding: 12px 14px;
    background: #fffdf5;
    border: 1px solid #f1e2a5;
    border-radius: 8px;
    color: #333;
    font-size: 14px;
    line-height: 1.6;
    }
    .lang-notice strong {
    color: #d14b3d;
    }


    .title-special {
    font-family: 'Playfair Display', Georgia, "Times New Roman", serif;
    font-size: 32px;
    font-weight: 700;
    color: var(--navy);
    letter-spacing: 0.5px;
    }

    /* ‚Äî‚Äî‚Äî ÂáèËΩªÊ†áÈ¢ò‰∏éÂç°ÁâáÁöÑÈáçÈáè ‚Äî‚Äî‚Äî */
.card .head h3{
  font-size: 20px;          /* 22 ‚Üí 20 */
  font-weight: 700;         /* ‰øùÊåÅÁ≤óÔºå‰ΩÜÂà´Â§™Èáç */
  letter-spacing: .2px;     /* Êî∂Á¥ßÂ≠óÈó¥Ë∑ù */
  margin: 0;                /* ÂéªÈ¢ùÂ§ñ‰∏ä‰∏ãÈó¥Ë∑ù */
}
.lang-grid{ gap: 12px; }     /* 18 ‚Üí 12ÔºåÂáèÁ®ÄÁñèÊÑü */
.lang-card{
  padding: 14px 16px;        /* 18 ‚Üí 14ÔºåÁº©Âç°ÁâáËÇöÈáè */
  border-radius: 12px;       /* 10‚Üí12 Êõ¥ÊüîÂíå */
  box-shadow: none;          /* ÂéªÈò¥ÂΩ±ÔºåÂáèÂ∞ëÂéöÈáç */
}
.lang-card .title{
  font-size: 18px;           /* 20 ‚Üí 18 */
  font-weight: 800;
}
.lang-card.selected{
  box-shadow: 0 0 0 1.5px var(--accent) inset; /* ÁªÜ‰∏ÄÁÇπÁöÑÈ´ò‰∫ÆËæπ */
  background: #fff;          /* ÂéªÁ≤âÂ∫ïÔºåÂπ≤ÂáÄ‰∫õ */
}

/* ‚Äî‚Äî‚Äî ËÆ©ËØ¥ÊòéÂå∫Êõ¥ËΩª„ÄÅÊõ¥Èù†ËøëÂç°ÁâáÔºåÂáèÂ∞ë"Â±Ç"ÊÑü ‚Äî‚Äî‚Äî */
.lang-info{
  margin-top: 10px;          /* 12 ‚Üí 10 */
  padding: 10px 12px;        /* ‰øùÊåÅÂ∞èËæπË∑ù */
  border: 1px dashed #efe7cf;/* ÂÆûÁ∫ø‚ÜíËôöÁ∫øÔºåÊõ¥ËΩª */
  background: #fffef8;       /* Êõ¥ÊµÖÁöÑÂ∫ïËâ≤ */
}
.lang-info .hint{ font-weight: 700; opacity: .9; }
.lang-info .desc{
  font-size: 13.5px;         /* 14 ‚Üí 13.5 */
  color: #566076;
}

/* ‚Äî‚Äî‚Äî Ë¥≠Á•®ÊèêÁ§∫ÂÅö"ËÑöÊ≥®Âåñ"Â§ÑÁêÜÔºöÂ≠óÂè∑Êõ¥Â∞è„ÄÅÁïôÁôΩÊõ¥Á¥ßÂáë ‚Äî‚Äî‚Äî */
.lang-notice{
  margin-top: 10px;          /* 14 ‚Üí 10 */
  padding: 10px 12px;        /* 12/14 ‚Üí 10/12 */
  font-size: 13.5px;         /* 14 ‚Üí 13.5 */
  line-height: 1.5;          /* 1.6 ‚Üí 1.5 */
  background: #fff;          /* ÂéªÈ´ò‰∫ÆÂ∫ïËâ≤ */
  border: 1px solid #eee8d6; /* Êõ¥Ê∑°ÁöÑËæπ */
  color: #47536a;
}
.lang-notice strong{ color: var(--accent); }

/* ‚Äî‚Äî‚Äî Êó•ÂéÜÂùóÁ®çÂæÆÊõ¥"Èáç"ÔºåÂΩ¢Êàê‰∏ä‰∏ãÂπ≥Ë°° ‚Äî‚Äî‚Äî */
.cal-nav{ background:#eef4fb; border-color:#dfeaf8; }
.cal-head > div{ background:#f7fbff; }
.calendar .day{ height: 40px; } /* 36 ‚Üí 40 ËÆ©‰∏ãÂçäÈÉ®ÂàÜÊõ¥Á®≥ */


.time-icon-text {
  font-size: 16px;       /* ÂõæÊ†áÂ§ßÂ∞è */
  margin-right: 6px;     /* ÂíåÊñáÂ≠ó‰πãÈó¥ÁöÑÈó¥Ë∑ù */
  color: #16324f;        /* ÂõæÊ†áÈ¢úËâ≤ */
  vertical-align: middle;/* ÂûÇÁõ¥ÂØπÈΩêÊñáÂ≠ó */
}

.calendar.mini{display:grid;grid-template-columns:repeat(7,1fr);gap:6px}
.calendar.mini .day{height:34px;border:1px solid var(--line);background:#fff;border-radius:8px;font-weight:800;display:flex;align-items:center;justify-content:center;cursor:pointer}
.calendar.mini .day.disabled{color:#9aa2ad;background:#f8f6ee;cursor:not-allowed}
.calendar.mini .day.selected{background:var(--navy);color:#fff;border-color:var(--navy)}
.cal-nav{display:grid;grid-template-columns:48px 1fr 48px;align-items:center;gap:10px;padding:8px;background:#eef6ff;border:1px solid #d7e6ff;border-radius:14px}
.cal-title{text-align:center;font-weight:900;color:#16324f}
.cal-nav-btn{height:32px;border-radius:10px;border:1px solid #d7e6ff;background:#fff;cursor:not-allowed}
.cal-head{display:grid;grid-template-columns:repeat(7,1fr);gap:6px;margin:8px 0 6px;font-weight:900;color:var(--navy);opacity:.9;text-align:center}
.cal-head>div{padding:8px 0;border:1px solid #e8f0ff;background:#f6fbff;border-radius:10px}



/* Performance meta bar (sits above mini calendar) */
.perf-meta{
  display:flex; align-items:flex-start; gap:8px;
  padding:8px 10px; margin-bottom:8px;
  background:#f7fbff; border:1px solid #e2edff; border-radius:10px;
  color:#16324f; font-weight:700; line-height:1.5;
}
.perf-meta .icon{font-size:18px; line-height:1;}
.perf-meta .text{font-weight:700;}
.perf-meta .sub{font-weight:600; opacity:.9;}
.perf-meta .sep{margin:0 6px; opacity:.5;}

  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand"><span class="mark"></span>Vienna State Opera</div>
      <nav>
        <a href="#opening">Opening Time</a>
        <a href="#calendar">Tour guide</a>
        <a href="#tickets">Performance</a>
        <a href="#summary">Summary</a>
      </nav>
    </div>
  </header>
  

  <section class="cover" aria-label="Top banner">
    <div class="container">
      <h1 class="title">Vienna State Opera</h1>
      <p class="subtitle" style="font-size: 24px;">Tickets & Booking</p>
    </div>
  </section>


  <main>
    <!-- Opening Time Section -->
    <section id="opening" class="section-box" aria-label="Opening Time">
      <div class="container">
        <div class="section-title">
          <span class="dot"></span><span>Opening Time</span>
        </div>
        <div class="card" aria-label="Opening time">
          <div class="body">
  
            <!-- ‚ö†Ô∏è ÈáçË¶ÅÊèêÁ§∫Ôºö‰∏çÊîØÊåÅËá™Ë°åÂèÇËßÇ -->
            <div class="notice" style="background:#fff3cd; border:1px solid #ffe69c; padding:14px; margin-bottom:18px; text-align:center;">
              <p style="margin:0; font-size:16px; font-weight:bold; color:#664d03;">
                ‚ö†Ô∏è Please note: Self-guided visits are NOT available.<br>
                Entry is only possible with a guided tour or a performance ticket.
              </p>
            </div>
  
            <!-- Opening Hours Âíå Tour Guide Hours -->
            <ul class="ot-hours" aria-label="Opening hours list" 
                style="list-style:none; padding-left:0; margin:0; line-height:1.9; font-size:18px;">
              <li style="margin-bottom:8px;">
                <strong>Opening Hours:</strong> 
                <span style="margin-left:8px;">Daily 09:00‚Äì22:00</span>
              </li>
              <li>
                <strong>Tour Guide Hours:</strong> 
                <span style="margin-left:8px;">Daily 09:00‚Äì16:00</span>
              </li>
            </ul>
  
            <!-- ÂØºËßàËØ≠Ë®ÄËØ¥Êòé -->
            <div class="notice" style="margin-top:18px;">
              <div class="title" style="font-weight:bold; margin-bottom:6px;">
                üìñ Guided Tour Languages
              </div>
              <p class="hint" style="margin:6px 0 0;">
                <strong>German / English</strong>: all seven time slots available daily. <strong>French / Spanish / Italian / Japanese</strong>: only <u>13:15‚Äì14:00</u> & <u>15:15‚Äì16:00</u>.
              </p>
            </div>
  
            <!-- ÊºîÂá∫Êó∂Èó¥ËØ¥Êòé -->
            <div class="notice" style="margin-top:18px;">
              <div class="title" style="font-weight:bold; margin-bottom:6px;">
                üé≠ Performance Times
              </div>
              <p class="hint" style="margin:6px 0 0;">
                Performance times vary depending on the program.
                Please check the schedule for exact start times.
              </p>
            </div>
  
            
  
          </div>
        </div>
      </div>
    </section>
  </main>
  
  <!-- Guided Tour Booking (single-file: HTML + CSS + JS) -->
<section id="calendar" class="section-box" aria-label="Guided Tour Booking">
    <div class="container">
      <div class="section-title"><span class="dot"></span><span>Guided Tour </span></div>
  
      <!-- Step 1: Language -->
      <div class="card" style="margin-bottom:12px;">
        <div class="head" ><h3 class="title-special">Make your choice</h3></div>
        <div class="body">
          <div id="langGrid" class="lang-grid" role="radiogroup" aria-label="Guided tour languages"></div>
          
            <p class="hint">
                <span class="time-icon-text">‚ö†Ô∏è</span>Important: <br>
                ¬∑ Please arrive <strong>15</strong> minutes before your selected time.<br>¬∑ This approximately <strong> 40-minute </strong>tour, you will hear many interesting facts about the building's history, its architecture and how an opera house is run.<br>¬∑ Guided tours can only be purchased in our ticket store or <strong>30</strong> minutes before the respective tour on site at the box office (entrance at the corner of Opernring).
        </div>
        
    
  
      <!-- Step 2 & 3: Date & Time -->
      <div class="grid" style="margin-top:8px;">
        <div class="col-7">
          <div class="card">
            <div class="head"><h3>Choose date</h3></div>
            <div class="body">
                
                  <div class="cal-nav">
                    <button class="cal-nav-btn" id="calPrev" disabled aria-label="Previous month">‚Äπ</button>
                    <div class="cal-title" id="calTitle">August 2026</div>
                    <button class="cal-nav-btn" id="calNext" disabled aria-label="Next month">‚Ä∫</button>
                  </div>
                  <!-- ÊòüÊúüË°å -->
                <div class="cal-head" aria-hidden="true">
                    <div>SUN</div><div>MON</div><div>TUE</div><div>WED</div><div>THU</div><div>FRI</div><div>SAT</div>
                </div>
                
                <!-- Êó•ÊúüÊ†ºÂ≠ê -->
                <div class="calendar" id="calendarDays" aria-label="Calendar days"></div>
                  
              <p class="hint" style="margin-top:8px;">Selectable dates appear dark; greyed dates are unavailable.</p>
            </div>
          </div>
        </div>
        <div class="col-5">
          <div class="card">
            <div class="head"><h3>Choose time</h3></div>
            <div class="body">
              <p class="hint" style="margin-bottom:10px; padding:8px; background:#fffef8; border:1px dashed #efe7cf; border-radius:6px;">
                <span class="time-icon-text">üïí</span>The first time is the <strong>start time</strong> 
              </p>
              <div class="times" id="timeSlots"></div>
              <p class="hint" style="margin-top:8px;">Selected:
                <span id="chosenLang">‚Äî</span> ¬∑ <span id="chosenDate">‚Äî</span> <span id="chosenTime"></span>
              </p>
            </div>
          </div>
        </div>
      </div>
  
      <!-- Step 4: Tickets -->
<div class="body">

    <div class="ticket-list">
      <!-- Adults -->
      <div class="t-item">
        <div class="t-left">
          <div class="t-name">Adults</div>
        </div>
        <div class="t-right">
          <div class="t-price">‚Ç¨<span data-price="adult">15.00</span></div>
          <div class="t-qty">
            <button class="pill" data-dec="adult">‚àí</button>
            <span class="count"><input id="adult" type="number" value="0" min="0" inputmode="numeric"></span>
            <button class="pill" data-inc="adult">+</button>
          </div>
        </div>
      </div>
  
      <!-- Senior citizens -->
      <div class="t-item">
        <div class="t-left">
          <div class="t-name">Senior citizens</div>
          <div class="t-note">65+ or with a valid pensioners' ID</div>
        </div>
        <div class="t-right">
          <div class="t-price">‚Ç¨<span data-price="senior">11.00</span></div>
          <div class="t-qty">
            <button class="pill" data-dec="senior">‚àí</button>
            <span class="count"><input id="senior" type="number" value="0" min="0" inputmode="numeric"></span>
            <button class="pill" data-inc="senior">+</button>
          </div>
        </div>
      </div>
  
      <!-- Students / Apprentices under 27 -->
      <div class="t-item">
        <div class="t-left">
          <div class="t-name">Students / Apprentices under 27</div>
          <div class="t-note">valid student/apprentice ID required</div>
        </div>
        <div class="t-right">
          <div class="t-price">‚Ç¨<span data-price="u27">9.00</span></div>
          <div class="t-qty">
            <button class="pill" data-dec="u27">‚àí</button>
            <span class="count"><input id="u27" type="number" value="0" min="0" inputmode="numeric"></span>
            <button class="pill" data-inc="u27">+</button>
          </div>
        </div>
      </div>
  
      <!-- Children from 6 years (Â§çÁî® disability ÈîÆÔºåÈÅøÂÖçÊîπ JS) -->
      <div class="t-item">
        <div class="t-left">
          <div class="t-name">Children from 6 years</div>
        </div>
        <div class="t-right">
          <div class="t-price">‚Ç¨<span data-price="disability">9.00</span></div>
          <div class="t-qty">
            <button class="pill" data-dec="disability">‚àí</button>
            <span class="count"><input id="disability" type="number" value="0" min="0" inputmode="numeric"></span>
            <button class="pill" data-inc="disability">+</button>
          </div>
        </div>
      </div>
  
      <!-- Children under 6 -->
      <div class="t-item">
        <div class="t-left">
          <div class="t-name">Children under 6</div>
        </div>
        <div class="t-right">
          <div class="t-price free">FREE</div>
          <div class="t-qty">
            <button class="pill" data-dec="child">‚àí</button>
            <span class="count"><input id="child" type="number" value="0" min="0" inputmode="numeric"></span>
            <button class="pill" data-inc="child">+</button>
          </div>
        </div>
      </div>
    </div>
  
    <!-- ÂèØÈÄâÔºöPrivate TourÔºàÂåÖÂú∫Ôºâ -->
    <div class="ticket-list" style="margin-top:12px;">
      <div class="t-item">
        <div class="t-left">
          <div class="t-name">Private Tour (up to 20 people)</div>
          <div class="t-note">total cost</div>
        </div>
        <div class="t-right">
          <div class="t-price">‚Ç¨<span data-price="private">480.00</span></div>
          <div class="t-qty">
            <button class="pill" data-dec="private">‚àí</button>
            <span class="count"><input id="private" type="number" value="0" min="0" max="1" inputmode="numeric"></span>
            <button class="pill" data-inc="private">+</button>
          </div>
        </div>
      </div>
    </div>
  
    <div class="summary total">
      <div><span id="ticketCount">0 Ticket(s)</span></div>
      <div><span id="sumPrice">‚Ç¨0.00</span></div>
    </div>
    <div class="actions" style="margin-top:10px;">
      <button id="reset" class="btn reset">Reset</button>
      <button id="checkout" class="btn primary" disabled>Add to shopping cart</button>
    </div>
  </div>
</section>
</main>


<!-- Events (replace your current section#tickets with this) -->
<!-- Events (with per-event calendar & inventory) -->
<section id="tickets" class="section-box" aria-label="Events">
    <div class="container">
      <div class="section-title"><span class="dot"></span><span>Events</span></div>
  
      <div class="grid" style="margin-top:8px;">
  
        
  
        <!-- BALLET: GISELLE -->
        <div class="col-6">
          <div class="card" aria-label="BALLET: GISELLE">
            <div class="head"><h3>BALLET: GISELLE</h3></div>
            <div class="body">
              <div class="perf-meta">
                <span class="icon">üïí</span>
                <div>
                  <div class="text">Time: Mon‚ÄìTue <strong>19:30‚Äì21:45</strong><span class="sep">¬∑</span>Sat <strong>13:30‚Äì15:45</strong></div>
                  <div class="sub">Dates: <strong>Mon, Tue & Sat</strong> in August</div>
                </div>
              </div>
              
              <div class="cal-nav">
                <button class="cal-nav-btn" disabled>‚Äπ</button>
                <div class="cal-title">August 2026</div>
                <button class="cal-nav-btn" disabled>‚Ä∫</button>
              </div>
              <div class="cal-head"><div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div></div>
              <div class="calendar mini" id="cal_g"></div>
              <p class="hint" style="margin:8px 0 10px;">Selected: <span id="sel_g">‚Äî</span> ¬∑ <strong>Time</strong> <span id="time_g">‚Äî</span></p>
  
              <div class="row"><div><strong>Area 1</strong></div><div class="qty"><span class="price">199 ‚Ç¨</span><button class="btn-ghost" data-dec="g_a1">-</button><input id="g_a1" type="number" min="0" value="0"><button class="btn-ghost" data-inc="g_a1">+</button><span id="left-g_a1" class="left"></span></div></div>
              <div class="row"><div><strong>Area 2</strong></div><div class="qty"><span class="price">159 ‚Ç¨</span><button class="btn-ghost" data-dec="g_a2">-</button><input id="g_a2" type="number" min="0" value="0"><button class="btn-ghost" data-inc="g_a2">+</button><span id="left-g_a2" class="left"></span></div></div>
              <div class="row"><div><strong>Area 3</strong></div><div class="qty"><span class="price">129 ‚Ç¨</span><button class="btn-ghost" data-dec="g_a3">-</button><input id="g_a3" type="number" min="0" value="0"><button class="btn-ghost" data-inc="g_a3">+</button><span id="left-g_a3" class="left"></span></div></div>
              <div class="row"><div><strong>Area 4</strong></div><div class="qty"><span class="price">94 ‚Ç¨</span><button class="btn-ghost" data-dec="g_a4">-</button><input id="g_a4" type="number" min="0" value="0"><button class="btn-ghost" data-inc="g_a4">+</button><span id="left-g_a4" class="left"></span></div></div>
              <div class="row"><div><strong>Area 5</strong></div><div class="qty"><span class="price">69 ‚Ç¨</span><button class="btn-ghost" data-dec="g_a5">-</button><input id="g_a5" type="number" min="0" value="0"><button class="btn-ghost" data-inc="g_a5">+</button><span id="left-g_a5" class="left"></span></div></div>

              
              <div class="warn-line" role="note" style="margin-top:10px;"><span>‚ÑπÔ∏è</span><span>Standing Room</span></div>
              <div class="row"><div><strong>Ground Floor</strong></div><div class="qty"><span class="price">‚Ç¨18</span><button class="btn-ghost" data-dec="g_stand_ground">-</button><input id="g_stand_ground" type="number" min="0" value="0"><button class="btn-ghost" data-inc="g_stand_ground">+</button><span id="left-g_stand_ground" class="left"></span></div></div>
              <div class="row"><div><strong>Balcony</strong></div><div class="qty"><span class="price">‚Ç¨13</span><button class="btn-ghost" data-dec="g_stand_balcony">-</button><input id="g_stand_balcony" type="number" min="0" value="0"><button class="btn-ghost" data-inc="g_stand_balcony">+</button><span id="left-g_stand_balcony" class="left"></span></div></div>
              <div class="row"><div><strong>Gallery</strong></div><div class="qty"><span class="price">‚Ç¨15</span><button class="btn-ghost" data-dec="g_stand_gallery">-</button><input id="g_stand_gallery" type="number" min="0" value="0"><button class="btn-ghost" data-inc="g_stand_gallery">+</button><span id="left-g_stand_gallery" class="left"></span></div></div>
            
              <div class="notice" style="margin-top:10px;">
                <div class="title">‚ÑπÔ∏è Performance Info</div>
                <ul style="margin:6px 0 0 18px;">
                  <li>Main Stage ‚Äî One intermission</li>
                  <li>Latecomers can only be admitted during the intermission.</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
  
        <!-- IOLANTA -->
        <div class="col-6">
          <div class="card" aria-label="IOLANTA">
            <div class="head"><h3>IOLANTA</h3></div>
            <div class="body">
              <div class="perf-meta">
                <span class="icon">üïí</span>
                <div>
                  <div class="text">Time: 20:00‚Äì21:45</div>
                  <div class="sub">Dates: <strong>Thu & Fri</strong> in August </div>
                </div>
              </div>
              
              <div class="cal-nav">
                <button class="cal-nav-btn" disabled>‚Äπ</button>
                <div class="cal-title">August 2026</div>
                <button class="cal-nav-btn" disabled>‚Ä∫</button>
              </div>
              <div class="cal-head"><div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div></div>
              <div class="calendar mini" id="cal_i"></div>
              <p class="hint" style="margin:8px 0 10px;">Selected: <span id="sel_i">‚Äî</span> ¬∑ <strong>Time</strong> <span id="time_i">‚Äî</span></p>
  
              <div class="row"><div><strong>Area 1</strong></div><div class="qty"><span class="price">232 ‚Ç¨</span><button class="btn-ghost" data-dec="i_a1">-</button><input id="i_a1" type="number" min="0" value="0"><button class="btn-ghost" data-inc="i_a1">+</button><span id="left-i_a1" class="left"></span></div></div>
              <div class="row"><div><strong>Area 2</strong></div><div class="qty"><span class="price">190 ‚Ç¨</span><button class="btn-ghost" data-dec="i_a2">-</button><input id="i_a2" type="number" min="0" value="0"><button class="btn-ghost" data-inc="i_a2">+</button><span id="left-i_a2" class="left"></span></div></div>
              <div class="row"><div><strong>Area 3</strong></div><div class="qty"><span class="price">153 ‚Ç¨</span><button class="btn-ghost" data-dec="i_a3">-</button><input id="i_a3" type="number" min="0" value="0"><button class="btn-ghost" data-inc="i_a3">+</button><span id="left-i_a3" class="left"></span></div></div>
              <div class="row"><div><strong>Area 4</strong></div><div class="qty"><span class="price">108 ‚Ç¨</span><button class="btn-ghost" data-dec="i_a4">-</button><input id="i_a4" type="number" min="0" value="0"><button class="btn-ghost" data-inc="i_a4">+</button><span id="left-i_a4" class="left"></span></div></div>
              <div class="row"><div><strong>Area 5</strong></div><div class="qty"><span class="price">86 ‚Ç¨</span><button class="btn-ghost" data-dec="i_a5">-</button><input id="i_a5" type="number" min="0" value="0"><button class="btn-ghost" data-inc="i_a5">+</button><span id="left-i_a5" class="left"></span></div></div>
              

              <div class="warn-line" role="note" style="margin-top:10px;"><span>‚ÑπÔ∏è</span><span>Standing Room</span></div>
              <div class="row"><div><strong>Ground Floor</strong></div><div class="qty"><span class="price">‚Ç¨18</span><button class="btn-ghost" data-dec="i_stand_ground">-</button><input id="i_stand_ground" type="number" min="0" value="0"><button class="btn-ghost" data-inc="i_stand_ground">+</button><span id="left-i_stand_ground" class="left"></span></div></div>
              <div class="row"><div><strong>Balcony</strong></div><div class="qty"><span class="price">‚Ç¨13</span><button class="btn-ghost" data-dec="i_stand_balcony">-</button><input id="i_stand_balcony" type="number" min="0" value="0"><button class="btn-ghost" data-inc="i_stand_balcony">+</button><span id="left-i_stand_balcony" class="left"></span></div></div>
              <div class="row"><div><strong>Gallery</strong></div><div class="qty"><span class="price">‚Ç¨15</span><button class="btn-ghost" data-dec="i_stand_gallery">-</button><input id="i_stand_gallery" type="number" min="0" value="0"><button class="btn-ghost" data-inc="i_stand_gallery">+</button><span id="left-i_stand_gallery" class="left"></span></div></div>
            
              <div class="notice" style="margin-top:10px;">
                <div class="title">‚ÑπÔ∏è Performance Info</div>
                <ul style="margin:6px 0 0 18px;">
                  <li>Lyrische Oper in einem Akt ‚Äî Language Russisch</li>
                  <li>Main Stage ‚Äî No intermissions</li>
                 </ul>
              </div>
            </div>
          </div>
        </div>
  

        <!-- CARMEN -->
<div class="col-6">
  <div class="card" aria-label="CARMEN">
    <div class="head"><h3>CARMEN</h3></div>
    <div class="body">
      <div class="perf-meta">
        <span class="icon">üïí</span>
        <div>
          <div class="text">Time: 19:00‚Äì21:00</div>
          <div class="sub">Dates: <strong>Sat & Sun</strong> in August</div>
        </div>
      </div>
      
      <!-- Calendar -->
      <div class="cal-nav">
        <button class="cal-nav-btn" disabled>‚Äπ</button>
        <div class="cal-title">August 2026</div>
        <button class="cal-nav-btn" disabled>‚Ä∫</button>
      </div>
      <div class="cal-head"><div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div></div>
      <div class="calendar mini" id="cal_c"></div>
      <p class="hint" style="margin:8px 0 10px;">Selected: <span id="sel_c">‚Äî</span> ¬∑ <strong>Time</strong> <span id="time_c">‚Äî</span></p>

      <!-- Prices (Êù•Ëá™Êà™Âõæ) -->
      <div class="row"><div><strong>Area 1</strong></div><div class="qty"><span class="price">242 ‚Ç¨</span><button class="btn-ghost" data-dec="c_a1">-</button><input id="c_a1" type="number" min="0" value="0"><button class="btn-ghost" data-inc="c_a1">+</button><span id="left-c_a1" class="left"></span></div></div>
      <div class="row"><div><strong>Area 2</strong></div><div class="qty"><span class="price">198 ‚Ç¨</span><button class="btn-ghost" data-dec="c_a2">-</button><input id="c_a2" type="number" min="0" value="0"><button class="btn-ghost" data-inc="c_a2">+</button><span id="left-c_a2" class="left"></span></div></div>
      <div class="row"><div><strong>Area 3</strong></div><div class="qty"><span class="price">165 ‚Ç¨</span><button class="btn-ghost" data-dec="c_a3">-</button><input id="c_a3" type="number" min="0" value="0"><button class="btn-ghost" data-inc="c_a3">+</button><span id="left-c_a3" class="left"></span></div></div>
      <div class="row"><div><strong>Area 4</strong></div><div class="qty"><span class="price">113 ‚Ç¨</span><button class="btn-ghost" data-dec="c_a4">-</button><input id="c_a4" type="number" min="0" value="0"><button class="btn-ghost" data-inc="c_a4">+</button><span id="left-c_a4" class="left"></span></div></div>
      <div class="row"><div><strong>Area 5</strong></div><div class="qty"><span class="price">89 ‚Ç¨</span><button class="btn-ghost" data-dec="c_a5">-</button><input id="c_a5" type="number" min="0" value="0"><button class="btn-ghost" data-inc="c_a5">+</button><span id="left-c_a5" class="left"></span></div></div>
      <div class="warn-line" role="note" style="margin-top:10px;"><span>‚ÑπÔ∏è</span><span>Standing Room</span></div>
      <div class="row"><div><strong>Ground Floor</strong></div><div class="qty"><span class="price">‚Ç¨18</span><button class="btn-ghost" data-dec="c_stand_ground">-</button><input id="c_stand_ground" type="number" min="0" value="0"><button class="btn-ghost" data-inc="c_stand_ground">+</button><span id="left-c_stand_ground" class="left"></span></div></div>
      <div class="row"><div><strong>Balcony</strong></div><div class="qty"><span class="price">‚Ç¨13</span><button class="btn-ghost" data-dec="c_stand_balcony">-</button><input id="c_stand_balcony" type="number" min="0" value="0"><button class="btn-ghost" data-inc="c_stand_balcony">+</button><span id="left-c_stand_balcony" class="left"></span></div></div>
      <div class="row"><div><strong>Gallery</strong></div><div class="qty"><span class="price">‚Ç¨15</span><button class="btn-ghost" data-dec="c_stand_gallery">-</button><input id="c_stand_gallery" type="number" min="0" value="0"><button class="btn-ghost" data-inc="c_stand_gallery">+</button><span id="left-c_stand_gallery" class="left"></span></div></div>
    
      <div class="notice" style="margin-top:10px;">
        <div class="title">‚ÑπÔ∏è Performance Info</div>
        <ul style="margin:6px 0 0 18px;">
          <li>Main Stage ‚Äî One intermission</li>
          <li>Op√©ra comique in vier Akten ‚Äî Language Franz√∂sisch</li>
          <li>Age Recommendation 14 +</li>
        </ul>
      </div>
    </div>
  </div>
</div>


<!-- VƒöC MAKROPULOS -->
<div class="col-6">
  <div class="card" aria-label="VƒöC MAKROPULOS">
    <div class="head"><h3>VƒöC MAKROPULOS</h3></div>
    <div class="body">
      <div class="perf-meta">
        <span class="icon">üïí</span>
        <div>
          <div class="text">Time: 19:00‚Äì21:15</div>
          <div class="sub">Dates: <strong>Wed</strong> in August</div>
        </div>
      </div>
      
      <!-- Calendar -->
      <div class="cal-nav">
        <button class="cal-nav-btn" disabled>‚Äπ</button>
        <div class="cal-title">August 2026</div>
        <button class="cal-nav-btn" disabled>‚Ä∫</button>
      </div>
      <div class="cal-head"><div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div></div>
      <div class="calendar mini" id="cal_m"></div>
      <p class="hint" style="margin:8px 0 10px;">Selected: <span id="sel_m">‚Äî</span> ¬∑ <strong>Time</strong> <span id="time_m">‚Äî</span></p>

      <!-- Prices (Êù•Ëá™Êà™Âõæ) -->
      <div class="row"><div><strong>Area 1</strong></div><div class="qty"><span class="price">220 ‚Ç¨</span><button class="btn-ghost" data-dec="m_a1">-</button><input id="m_a1" type="number" min="0" value="0"><button class="btn-ghost" data-inc="m_a1">+</button><span id="left-m_a1" class="left"></span></div></div>
      <div class="row"><div><strong>Area 2</strong></div><div class="qty"><span class="price">175 ‚Ç¨</span><button class="btn-ghost" data-dec="m_a2">-</button><input id="m_a2" type="number" min="0" value="0"><button class="btn-ghost" data-inc="m_a2">+</button><span id="left-m_a2" class="left"></span></div></div>
      <div class="row"><div><strong>Area 3</strong></div><div class="qty"><span class="price">140 ‚Ç¨</span><button class="btn-ghost" data-dec="m_a3">-</button><input id="m_a3" type="number" min="0" value="0"><button class="btn-ghost" data-inc="m_a3">+</button><span id="left-m_a3" class="left"></span></div></div>
      <div class="row"><div><strong>Area 4</strong></div><div class="qty"><span class="price">100 ‚Ç¨</span><button class="btn-ghost" data-dec="m_a4">-</button><input id="m_a4" type="number" min="0" value="0"><button class="btn-ghost" data-inc="m_a4">+</button><span id="left-m_a4" class="left"></span></div></div>
      <div class="row"><div><strong>Area 5</strong></div><div class="qty"><span class="price">76 ‚Ç¨</span><button class="btn-ghost" data-dec="m_a5">-</button><input id="m_a5" type="number" min="0" value="0"><button class="btn-ghost" data-inc="m_a5">+</button><span id="left-m_a5" class="left"></span></div></div>
      <div class="warn-line" role="note" style="margin-top:10px;"><span>‚ÑπÔ∏è</span><span>Standing Room</span></div>
      <div class="row"><div><strong>Ground Floor</strong></div><div class="qty"><span class="price">‚Ç¨18</span><button class="btn-ghost" data-dec="m_stand_ground">-</button><input id="m_stand_ground" type="number" min="0" value="0"><button class="btn-ghost" data-inc="m_stand_ground">+</button><span id="left-m_stand_ground" class="left"></span></div></div>
      <div class="row"><div><strong>Balcony</strong></div><div class="qty"><span class="price">‚Ç¨13</span><button class="btn-ghost" data-dec="m_stand_balcony">-</button><input id="m_stand_balcony" type="number" min="0" value="0"><button class="btn-ghost" data-inc="m_stand_balcony">+</button><span id="left-m_stand_balcony" class="left"></span></div></div>
      <div class="row"><div><strong>Gallery</strong></div><div class="qty"><span class="price">‚Ç¨15</span><button class="btn-ghost" data-dec="m_stand_gallery">-</button><input id="m_stand_gallery" type="number" min="0" value="0"><button class="btn-ghost" data-inc="m_stand_gallery">+</button><span id="left-m_stand_gallery" class="left"></span></div></div>
    
      <div class="notice" style="margin-top:10px;">
        <div class="title">‚ÑπÔ∏è Performance Info</div>
        <ul style="margin:6px 0 0 18px;">
          <li>Main Stage ‚Äî One intermission</li>
          <li>Language Tschechisch</li>
          <li><strong>Audience Introduction (in German)</strong>: 30 minutes before the performance starts at the Gustav Mahler Hall.</li>
        </ul>
      </div>
    </div>
  </div>
</div>

        <div class="col-6"></div>
      </div>
    </div>
  </section>
  
  
  
    <!-- Summary / Checkout -->
    <section id="summary" class="section-box" aria-label="Summary & Book">
      <div class="container">
        <div class="section-title"><span class="dot"></span><span>Order Summary</span></div>
        <div class="card summary" style="margin-top:8px;">
          <div class="body">
            <!-- È°∂ÈÉ®ÔºöÂØºËßàÊó•Êúü‰∏éÊó∂Èó¥Ôºà‰øùÁïôÂØºËßàÂÜôÂÖ•Ôºâ -->
            <<!-- È°∂ÈÉ®ÔºöÂè™ÊòæÁ§∫ÂØºËßàÁöÑ Date/Time -->
              <div class="grid">
                <div class="col-6">
                  <div><strong>Date:</strong> <span id="sumDate">‚Äî</span></div>
                  <div style="margin-top:6px;"><strong>Time:</strong> <span id="sumTime">‚Äî</span></div>
                </div>
                <div class="col-6"></div> <!-- Á©∫ÁùÄÂç≥ÂèØ -->
              </div>

          
            <!-- ÂØºËßà -->
            <div style="margin-top:12px;">
              <div class="section-title" style="font-size:18px;"><span class="dot" style="width:8px;height:8px"></span><span>Guided Tour</span></div>
              <ul id="sumTourList" style="margin:8px 0 0 18px; padding:0; list-style:disc;"></ul>
              <div class="total"><span>Tour Subtotal</span><span id="sumTourTotal">‚Ç¨0.00</span></div>
            </div>
          
            <!-- üîπÂàÜÈöîÁ∫øÔºà‰Ω†ËØ¥"Â∞ë‰∏ÄÊ®™"Ôºâ -->
            <div style="height:1px;background:#e8e1d2;margin:10px 0;"></div>
          
            <!-- ÊºîÂá∫ -->
            <div style="margin-top:0;">
              <div class="section-title" style="font-size:18px;"><span class="dot" style="width:8px;height:8px"></span><span>Performances</span></div>
              <ul id="sumPerfList" style="margin:8px 0 0 18px; padding:0; list-style:disc;"></ul>
              <div class="total"><span>Performance Subtotal</span><span id="sumPerfTotal">‚Ç¨0.00</span></div>
            </div>
          
            <!-- ÊÄªËÆ° + Êï∞Èáè + Book Now -->
            <div class="total"><span>Total</span><span id="sumPriceTotal">‚Ç¨0.00</span></div>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:6px;">
              <span id="ticketCountTotal" style="font-weight:700;opacity:.8;">0 Ticket(s)</span>
              <button class="btn primary" id="bookNow" disabled>Book Now</button>
            </div>
          </div>
          
        </div>
      </div>
    </section>
  </main>

  <!-- Checkout Modal -->
  <div class="modal" id="modal">
    <div class="box">
      <div class="head"><h4>Order Details</h4><button class="close" aria-label="Close" onclick="closeModal()">√ó</button></div>
      <div class="body" id="modalBody"></div>
    </div>
  </div>

  <script>
    /* ====== Config ====== */
    const LANGS = [
      {code:'de', name:'Guided Tour German',    group:'primary'},
      {code:'en', name:'Guided Tour English',   group:'primary'},
      {code:'fr', name:'Guided Tour French',    group:'secondary'},
      {code:'es', name:'Guided Tour Spanish',   group:'secondary'},
      {code:'it', name:'Guided Tour Italian',   group:'secondary'},
      {code:'ja', name:'Guided Tour Japanese',  group:'secondary'}
    ];
    const TIMES_PRIMARY = ["09:15‚Äì10:00","10:15‚Äì11:00","11:15‚Äì12:00","12:15‚Äì13:00","13:15‚Äì14:00","14:15‚Äì15:00","15:15‚Äì16:00"];
    const TIMES_SECOND = ["13:15‚Äì14:00","15:15‚Äì16:00"];
  
    // ÊåáÂÆöÊüêÂ§©Êüê‰∫õÊó∂ÊÆµÂîÆÁΩÑÔºöÈîÆÊòØ YYYY-MM-DDÔºåÂÄºÊòØÂîÆÁΩÑÊó∂ÊÆµÊï∞ÁªÑ
    const soldOutMap = {
    // Á§∫‰æãÔºö8Êúà12Êó•ÁöÑ 13:15‚Äì14:00 ÂîÆÁΩÑÔºõ8Êúà19Êó•‰∏§‰∏™Êó∂ÊÆµÈÉΩÂîÆÁΩÑ
    "2026-08-12": ["13:15‚Äì14:00"],
    "2026-08-19": ["13:15‚Äì14:00","15:15‚Äì16:00"],
    };

    // Á•®‰ª∑Ôºà‰∏éÊà™Âõæ‰∏ÄËá¥ÔºåÊ¨ßÂºèÂ∞èÊï∞ÊòæÁ§∫Áî®ÈÄóÂè∑Ôºâ
    // ÊîæÂú®ËÑöÊú¨‰∏äÊñπÈÖçÁΩÆÂ§Ñ
    const PRICES = {
    adult: 15.00,
    senior: 11.00,
    u27: 9.00,
    disability: 9.00, // ËøôÈáåÁî®‰Ωú "Children from 6 years"
    child: 0.00,      // "Children under 6"
    private: 480.00   // Private TourÔºà‰∏äÈôê 1Ôºâ
    };

  /* ====== Performance ticket prices (Ê¨ßÂÖÉ) ====== */
    const PERFORMANCE_PRICE = {
      // Giselle
      g_a1:199, g_a2:159, g_a3:129, g_a4:94,  g_a5:69,
      g_stand_ground:18, g_stand_balcony:13, g_stand_gallery:15,
      // Iolanta
      i_a1:232, i_a2:190, i_a3:153, i_a4:108, i_a5:86,
      i_stand_ground:18, i_stand_balcony:13, i_stand_gallery:15,
      // Carmen
      c_a1:242, c_a2:198, c_a3:165, c_a4:113, c_a5:89,
      c_stand_ground:18, c_stand_balcony:13, c_stand_gallery:15,
      // VƒöC MAKROPULOS
      m_a1:220, m_a2:175, m_a3:140, m_a4:100, m_a5:76,
      m_stand_ground:18, m_stand_balcony:13, m_stand_gallery:15
    };

/* ‚Äî‚Äî ÂêçÁß∞Êò†Â∞Ñ ‚Äî‚Äî */
const TOUR_LABELS = {
  adult: 'Adults',
  senior: 'Senior citizens',
  u27: 'Students / Apprentices under 27',
  disability: 'Children from 6 years',
  child: 'Children under 6',
  private: 'Private Tour (up to 20 people)'
};
const EV_NAME = { g:'BALLET: GISELLE', i:'IOLANTA', c:'CARMEN', m:'VƒöC MAKROPULOS' };
const AREA_NAME = k => (
  /^a([1-5])$/.test(k) ? `Area ${RegExp.$1}` :
  k==='stand_ground'  ? 'Standing ¬∑ Ground Floor' :
  k==='stand_balcony' ? 'Standing ¬∑ Balcony' :
  k==='stand_gallery' ? 'Standing ¬∑ Gallery' : k
);

/* ‚Äî‚Äî ÈáëÈ¢ùÊ†ºÂºè ‚Äî‚Äî */
function euro(n){ return n.toFixed(2).replace('.',',') + ' ‚Ç¨'; }

/* ‚Äî‚Äî ÊääÊºîÂá∫Á•® input id Ëß£ÊûêÊàê‰∫∫Á±ªÂèØËØªÂêç ‚Äî‚Äî */
function prettyPerfName(inputId){
  // e.g. g_a1 / c_stand_balcony
  const m = inputId.match(/^([gicm])_(a[1-5]|stand_(?:ground|balcony|gallery))$/);
  if(!m) return inputId;
  const ev = m[1], key = m[2];
  const evLabel = EV_NAME[ev] || ev.toUpperCase();
  // Â∞ùËØïÂ∏¶‰∏äËØ•ÊºîÂá∫ÁöÑÂ∑≤ÈÄâÊó•Êúü‰∏éÊó∂ÊÆµ
  const date = evState?.[ev]?.date || null;
  const time = evState?.[ev]?.time || null;
  const when = (date && time) ? ` (${date} ¬∑ ${time})` : '';
  return `${evLabel} ‚Äî ${AREA_NAME(key)}${when}`;
}



    // 2026-08ÔºöÈªòËÆ§ÊØèÂ§©ÂèØÈÄâÔºàÂ¶ÇÈúÄÈôêÂÆöÊó•ÊúüÔºåÂèØÊõøÊç¢‰∏∫ÂÖ∑‰ΩìÈõÜÂêàÔºâ
    const selectableDays = new Set(Array.from({length:31}, (_,i)=> i+1));
  
    /* ====== State ====== */
    const state = { lang:null, date:null, time:null };
    // ‚Äî‚Äî Â∑•ÂÖ∑ÂáΩÊï∞ÔºàÂÖ®Â±ÄÂèØÁî®Ôºâ ‚Äî‚Äî
    function qty(id){
    const el = document.getElementById(id);
    return parseInt((el && el.value) || '0', 10);
    }
    function euro(n){ return (n||0).toFixed(2).replace('.',',') + ' ‚Ç¨'; }

  
    /* ====== DOM ====== */
    const langGrid   = document.getElementById('langGrid');
    const calEl      = document.getElementById('calendarDays');
    const timeEl     = document.getElementById('timeSlots');
    const chosenLang = document.getElementById('chosenLang');
    const chosenDate = document.getElementById('chosenDate');
    const chosenTime = document.getElementById('chosenTime');
    const ticketCount= document.getElementById('ticketCount');
    const sumPrice   = document.getElementById('sumPrice');
    const checkout   = document.getElementById('checkout');
  
    /* ====== Render languages ====== */
    LANGS.forEach(L=>{
    const card = document.createElement('div');
    card.className = 'lang-card';
    // Âè™‰øùÁïôÊ†áÈ¢ò
    card.innerHTML = `<div class="title">${L.name}</div>`;

    card.addEventListener('click', ()=>{
        document.querySelectorAll('.lang-card').forEach(el=>el.classList.remove('selected'));
        card.classList.add('selected');
        state.lang = L.code;
        state.time = null;
        chosenLang.textContent = L.name;
        if (state.date) renderTimes();
        validateCheckout();
        
    });
    langGrid.appendChild(card);
    });

  
    /* ====== Render August 2026 calendar ====== */
    (function renderCalendar(){
      const firstDay = new Date(2026, 7, 1).getDay(); // 0=Sun .. 6=Sat
      for (let i = 0; i < firstDay; i++) {
        const placeholder = document.createElement('div');
        placeholder.className = 'day disabled';
        placeholder.textContent = '';
        calEl.appendChild(placeholder);
      }
      for(let d=1; d<=31; d++){
        const btn = document.createElement('button');
        const ok = selectableDays.has(d);
        btn.className = 'day' + (ok ? '' : ' disabled');
        btn.textContent = d;
        if (ok){
          btn.addEventListener('click', ()=>{
            state.date = `2026-08-${String(d).padStart(2,'0')}`;
            state.time = null;
            document.querySelectorAll('.calendar .day').forEach(el=>el.classList.remove('selected'));
            btn.classList.add('selected');
            renderTimes();
            validateCheckout();

            // ‚úÖ ÂêåÊ≠•Âà∞ Order SummaryÔºàÊòæÁ§∫ÂØºËßàÊó•ÊúüÔºåÊó∂Èó¥ÂÖàÊ∏ÖÁ©∫Ôºâ
  const sd = document.getElementById('sumDate');
  const st = document.getElementById('sumTime');
  if (sd) sd.textContent = state.date;
  if (st) st.textContent = '‚Äî';
          });
        }
        calEl.appendChild(btn);
      }
    })();
  
    /* ====== Render time slots (depends on language) ====== */
    function renderTimes() {
    timeEl.innerHTML = '';
    if (!state.lang) {
        timeEl.innerHTML = `<div class="hint">Please choose a language first.</div>`;
        return;
    }
    if (!state.date) {
        timeEl.innerHTML = `<div class="hint">Please pick a date.</div>`;
        return;
    }


    // Âà§Êñ≠‰∏ªËØ≠Ë®ÄËøòÊòØÂÖ∂‰ªñËØ≠Ë®Ä
    const isPrimary = (state.lang === 'de' || state.lang === 'en');
    const slots = isPrimary ? TIMES_PRIMARY : TIMES_SECOND;

    // ‰ªé soldOutMap Ëé∑ÂèñÂΩìÂâçÊó•ÊúüÁöÑÂîÆÁΩÑÊó∂ÊÆµ
    const todaySold = soldOutMap[state.date] || [];

    slots.forEach(t => {
        const b = document.createElement('button');

        // Âà§Êñ≠Ëøô‰∏™Êó∂ÊÆµÊòØÂê¶ÂîÆÁΩÑ
        const isSold = todaySold.includes(t);

        if (isSold) {
        // Â¶ÇÊûúÂîÆÁΩÑ
        b.className = 'time soldout';
        b.innerHTML = `<strong>${t}</strong><span class="so">Sold out</span>`;
        b.disabled = true; // Á¶ÅÁî®ÁÇπÂáª
        } else {
        // Ê≠£Â∏∏ÂèØÈÄâ
        b.className = 'time';
        b.innerHTML = `<strong>${t}</strong>`;
        b.addEventListener('click', () => {
            document.querySelectorAll('.time').forEach(el => el.classList.remove('selected'));
            b.classList.add('selected');
            state.time = t;
            chosenDate.textContent = state.date;
            chosenTime.textContent = state.time;

            // ‚úÖ ÂêåÊ≠•Âà∞ Order SummaryÔºàÊòæÁ§∫ÂØºËßàÊó∂Èó¥Ôºâ
  const sd = document.getElementById('sumDate');
  const st = document.getElementById('sumTime');
  if (sd) sd.textContent = state.date || '‚Äî';
  if (st) st.textContent = state.time || '‚Äî';

            validateCheckout();
        });
        }

        timeEl.appendChild(b);
    });

    // Êõ¥Êñ∞ÊòæÁ§∫
    chosenLang.textContent = LANGS.find(x => x.code === state.lang)?.name || '‚Äî';
    chosenDate.textContent = state.date || '‚Äî';
    chosenTime.textContent = state.time || '';
    }

  
    /* ====== Ticket qty logic ====== */
    document.querySelectorAll('[data-inc]').forEach(btn=>{
      btn.addEventListener('click', ()=> changeQty(btn.dataset.inc, +1));
    });
    document.querySelectorAll('[data-dec]').forEach(btn=>{
      btn.addEventListener('click', ()=> changeQty(btn.dataset.dec, -1));
    });
  
    function changeQty(id, delta){
      const input = document.getElementById(id);
      const cur = Math.max(0, (parseInt(input.value||'0',10) + delta));
      input.value = cur;
      validateCheckout();
    }
  
  
    /* ÈáëÈ¢ùÊ†ºÂºèÂåñÔºà‰øùÁïô‰Ω†ÁöÑ euro Ê†ºÂºèÔºâ */
    function euro(n){ return n.toFixed(2).replace('.',',') + ' ‚Ç¨'; }

    /* ÁªüËÆ°ÊâÄÊúâÁ•®ÔºöÂØºËßà(Adults/Seniors/...) + ÊºîÂá∫(ÂõõÂº†Âç°Áâá) */
    function updateTotalsAll(){
  // 1) ÂØºËßà
  const tourIds = ['adult','senior','u27','disability','child','private'];
  const tourItems = [];
  let tourCount = 0, tourPrice = 0;
  tourIds.forEach(id=>{
    const n = qty(id);
    if(!n) return;
    const unit = PRICES[id] || 0;
    tourCount += n;
    tourPrice += n * unit;
    const name = TOUR_LABELS[id] || id;
    tourItems.push({name, n, unit, sum:n*unit});
  });

  // 2) ÊºîÂá∫
  const perfInputs = Array.from(document.querySelectorAll('input[id^="g_"],input[id^="i_"],input[id^="c_"],input[id^="m_"]'));
  const perfItems = [];
  let perfCount = 0, perfPrice = 0;
  perfInputs.forEach(inp=>{
    const id = inp.id;
    const n  = parseInt(inp.value||'0',10);
    if(!n) return;
    const unit = PERFORMANCE_PRICE[id] || 0;
    perfCount += n;
    perfPrice += n * unit;
    perfItems.push({name:prettyPerfName(id), n, unit, sum:n*unit});
  });

  // 3) ÂÜôÂÖ• UIÔºöÊòéÁªÜÂàóË°® + Â∞èËÆ° + ÊÄªËÆ° + Êï∞Èáè
  const sumTourList   = document.getElementById('sumTourList');
  const sumTourTotal  = document.getElementById('sumTourTotal');
  const sumPerfList   = document.getElementById('sumPerfList');
  const sumPerfTotal  = document.getElementById('sumPerfTotal');
  const ticketCountEl = document.getElementById('ticketCountTotal'); // ‚úÖ
  const sumPriceEl    = document.getElementById('sumPriceTotal');
  
  if (sumTourList){
    sumTourList.innerHTML = tourItems.length
      ? tourItems.map(it=>`<li>${it.name} √ó ${it.n} ‚Äî ${euro(it.sum)}</li>`).join('')
      : '<li style="opacity:.6">No tour tickets</li>';
  }
  if (sumPerfList){
    sumPerfList.innerHTML = perfItems.length
      ? perfItems.map(it=>`<li>${it.name} √ó ${it.n} ‚Äî ${euro(it.sum)}</li>`).join('')
      : '<li style="opacity:.6">No performance tickets</li>';
  }
  if (sumTourTotal) sumTourTotal.textContent = euro(tourPrice);
  if (sumPerfTotal) sumPerfTotal.textContent = euro(perfPrice);

  const totalCount = tourCount + perfCount;
  const totalPrice = tourPrice + perfPrice;
  if (ticketCountEl) ticketCountEl.textContent = `${totalCount} Ticket(s)`;
  if (sumPriceEl)    sumPriceEl.textContent   = euro(totalPrice);

  return {tourCount, tourPrice, perfCount, perfPrice, totalCount, totalPrice};
}
const orderCheckout = document.getElementById('orderCheckout');
const bookNow       = document.getElementById('bookNow');
    /* ‚Äî‚Äî ÁªìÁÆóÊåâÈíÆÂèØÁî®ÊÄß ‚Äî‚Äî */
function validateCheckout(){
  const {tourCount, perfCount} = updateTotalsAll();
  const hasTourReady = !!(state.lang && state.date && state.time && tourCount > 0);
  const hasPerfReady = perfCount > 0; // ÊºîÂá∫Á•®‰∏ç‰æùËµñÂØºËßàÁöÑËØ≠Ë®Ä/Êó•Êúü/Êó∂ÊÆµ
  const can = hasTourReady || hasPerfReady;
  if (bookNow)       bookNow.disabled       = !can;  // ‚úÖ ÂêåÊ≠•ÊéßÂà∂ Book Now
}

  
    // ÈªòËÆ§ÔºöÊàê‰∫∫ 1 Âº† ‚Üí ÂàùÂßãÂêàËÆ° 15 ‚Ç¨
    validateCheckout();
    updateTotalsAll();
 
    // Ë¥≠Áâ©ËΩ¶ÊåâÈíÆÔºàÊåâ‰Ω†ÁöÑÂêéÁ´Ø/ÂºπÁ™óÈÄªËæëÂ§ÑÁêÜÔºâ
    checkout.addEventListener('click', ()=>{
      alert(`Added:\n${chosenLang.textContent}\n${chosenDate.textContent} ¬∑ ${chosenTime.textContent}\n${sumPrice.textContent}`);
    });

   // 0=Sun .. 6=Sat
function scheduleTime(eventKey, date){
  const wd = date.getDay();
  if(eventKey==='g'){ // Giselle: Mon‚ÄìTue & Sat
    if(wd===1 || wd===2) return '19:30‚Äì21:45';
    if(wd===6)           return '13:30‚Äì15:45';
    return null;
  }
  if(eventKey==='i'){ // Iolanta: Thu‚ÄìFri
    if(wd===4 || wd===5) return '20:00‚Äì21:45';
    return null;
  }
  if(eventKey==='c'){ // Carmen: Sat & Sun
    if(wd===6 || wd===0) return '19:00‚Äì21:00';
    return null;
  }
  if(eventKey==='m'){ // VƒöC MAKROPULOS: Wed
    if(wd===3) return '19:00‚Äì21:15';
    return null;
  }
  return null;
}


/** ‰∫ã‰ª∂Áä∂ÊÄÅÔºàÂêÑÊºîÂá∫ÁöÑÈÄâ‰∏≠Êó•Êúü‰∏éÊó∂Èó¥Ôºâ */
const evState = {
  g:{date:null,time:null}, // Giselle
  i:{date:null,time:null}, // Iolanta
  c:{date:null,time:null}, // Carmen
  m:{date:null,time:null}  // Makropulos
};


/** ‰ΩôÁ•®Ë°®ÔºöÊåâÂ§©ËÆæÁΩÆÔºàÊ≤°ÊúâÊù°ÁõÆÁöÑÁî®ÈªòËÆ§ÂÄºÔºâ */
/* ÂÖ®Â±ÄÂÖúÂ∫ïÔºà‰∏çÊé®Ëçê‰æùËµñÔºå‰ΩÜ‰øùÁïô‰ΩúÊúÄÂêé‰∏ÄÂ±ÇÔºâ */
const DEFAULT_LEFT = {
  a1: 30, a2: 50, a3: 80, a4: 100, a5: 120,
  stand_ground: 80, stand_balcony: 60, stand_gallery: 70
};

/* ÊØè‰∏™ÊºîÂá∫ÁöÑÈªòËÆ§‰ΩôÁ•®ÔºàÂÖúÂ∫ïÔºåÊï∞ÈáèÂÅèÂ∞ëÔºâ */
const EVENT_DEFAULT = {
  g: { a1: 10, a2: 12, a3: 14, a4: 16, a5: 18, stand_ground: 14, stand_balcony: 10, stand_gallery: 12 },
  i: { a1: 12, a2: 14, a3: 16, a4: 18, a5: 20, stand_ground: 12, stand_balcony: 9,  stand_gallery: 11 },
  c: { a1: 9,  a2: 12, a3: 14, a4: 16, a5: 18, stand_ground: 15, stand_balcony: 12, stand_gallery: 13 },
  m: { a1: 8,  a2: 10, a3: 12, a4: 14, a5: 16, stand_ground: 10, stand_balcony: 8,  stand_gallery: 9  }
};


/* ÊåáÂÆöÊó•ÊúüÁöÑÁâπÂà´‰ΩôÁ•®Ôºà‰ºòÂÖàÁ∫ßÊúÄÈ´òÔºâ */
/* Á°ÆÂÆöÊÄß‰º™ÈöèÊú∫ÔºöÊ†πÊçÆÂ≠óÁ¨¶‰∏≤ÁîüÊàêÂõ∫ÂÆöÊï¥Êï∞ÔºàÂà∑Êñ∞È°µÈù¢‰∏çÂèòÔºâ */
function seededInt(seed, min, max){
  let h = 0;
  for(let i=0;i<seed.length;i++){
    h = (h * 31 + seed.charCodeAt(i)) | 0;
  }
  h = Math.abs(h);
  return min + (h % (max - min + 1));
}

/* ÁîüÊàê 2026-08 ÁöÑ"ÊåâÊºîÂá∫√óÊåâÊó•Êúü"ÁöÑÂ∞èÈ¢ù‰ΩôÁ•® */
function buildInventorySmall(){
  const inv = { g:{}, i:{}, c:{}, m:{} };
  const y = 2026, mm = 7; // 8Êúà
  for(let d=1; d<=31; d++){
    const dateISO = `${y}-08-${String(d).padStart(2,'0')}`;
    const dateObj = new Date(y, mm, d);

    ['g','i','c','m'].forEach(evKey=>{
      // ‰ªÖÂØπËØ•ÊºîÂá∫"ÊúâÊéíÊúü"ÁöÑÊó•ÊúüÁîüÊàê‰ΩôÁ•®
      const t = scheduleTime(evKey, dateObj);
      if(!t) return;

      const seedBase = `${evKey}-${dateISO}`;
      // Â∞èÈ¢ùÂå∫Èó¥ÔºàÊõ¥ÂÆπÊòìÂîÆÁΩÑÔºâ
      const perDay = {
        a1: seededInt(seedBase+'-a1', 3, 12),
        a2: seededInt(seedBase+'-a2', 4, 14),
        a3: seededInt(seedBase+'-a3', 5, 16),
        a4: seededInt(seedBase+'-a4', 6, 18),
        a5: seededInt(seedBase+'-a5', 7, 20),
        stand_ground:  seededInt(seedBase+'-sg',   6, 20),
        stand_balcony: seededInt(seedBase+'-sb',   4, 16),
        stand_gallery: seededInt(seedBase+'-sgal', 5, 18)
      };

      // ËÆ©Âë®Êú´/ÁÉ≠Èó®Êó•Êõ¥Á¥ßÔºàÊØîÂ¶ÇÂë®ÂÖ≠/Âë®Êó•ÊàñËØ•ÊºîÁõÆÁöÑ"‰∏ªË¶ÅÊó•"Ôºâ
      const wd = dateObj.getDay(); // 0..6
      const weekendTighten = (wd===0 || wd===6) ? 1 : 0; // Âë®Êú´Êõ¥Â∞ë
      if (weekendTighten){
        Object.keys(perDay).forEach(k=>{
          perDay[k] = Math.max(0, perDay[k] - seededInt(seedBase+'-tight-'+k, 1, 3));
        });
      }

      // Â∞ëÈáèÈöèÊú∫ÂîÆÁΩÑÔºàÂà∂ÈÄ†ÁúüÂÆûÊÑüÔºâ
      if (seededInt(seedBase+'-soldout', 1, 100) <= 8) { // Á∫¶8%ÁöÑÂ§©ÊüêÊºîÂá∫ÂîÆÁΩÑ‰∏ªÂå∫
        perDay.a1 = 0;
      }
      if (seededInt(seedBase+'-soldout-stand', 1, 100) <= 6) { // Á∫¶6%ÁöÑÂ§©Á´ôÁ•®ÁîªÂªäÂîÆÁΩÑ
        perDay.stand_gallery = 0;
      }

      inv[evKey][dateISO] = perDay;
    });
  }
  return inv;
}

/* Áî®Ëá™Âä®ÁîüÊàêÁöÑË°®Êõø‰ª£ÈùôÊÄÅ INVENTORY */
const INVENTORY = buildInventorySmall();


// id ‰∏é INVENTORY ÈîÆÁöÑÊò†Â∞ÑÔºàÂéªÊéâÂâçÁºÄ z_/g_/i_Ôºâ
function mapIdToKey(id){
  const m = id.match(/^([gicm])_(.+)$/); // Âè™ÂÖÅËÆ∏ g/i/c/m ÂâçÁºÄ
  if(!m) return null;
  return { ev: m[1], key: m[2] };
}


/** Ê∏≤Êüì 2026-08 ÁöÑËø∑‰Ω†Êó•ÂéÜÔºàÂè™ÂºÄÊîæÁ¨¶ÂêàÊéíÊúüÁöÑÊó•ÊúüÔºâ */
function renderEventCalendar(eventKey, mountId, selLabelId, timeLabelId){
  const holder = document.getElementById(mountId);
  holder.innerHTML = '';
  const y = 2026, m = 7; // August
  const first = new Date(y, m, 1);
  const startWeekday = first.getDay(); // 0..6
  const daysInMonth = 31;

  // Â°´ÂÖÖÁ©∫ÁôΩ
  for(let i=0;i<startWeekday;i++){
    const pad = document.createElement('div');
    pad.className = 'day disabled';
    holder.appendChild(pad);
  }
  for(let d=1; d<=daysInMonth; d++){
    const date = new Date(y, m, d);
    const time = scheduleTime(eventKey, date);
    const btn = document.createElement('button');
    const enable = !!time;
    btn.className = 'day' + (enable ? '' : ' disabled');
    btn.textContent = d;
    if(enable){
      btn.addEventListener('click', ()=>{
        holder.querySelectorAll('.day').forEach(x=>x.classList.remove('selected'));
        btn.classList.add('selected');
        const iso = `${y}-${String(m+1).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
        evState[eventKey].date = iso;
        evState[eventKey].time = time;
        document.getElementById(selLabelId).textContent = iso;
        document.getElementById(timeLabelId).textContent = time;
        refreshLeftForEvent(eventKey); // Âà∑Êñ∞ËØ•ÊºîÂá∫ÁöÑ‰ΩôÁ•®ÊòæÁ§∫/ÂèØÁî®ÊÄß
        // Â¶ÇÊûú‰Ω†ÊúâÊÄªÁöÑ SummaryÔºå‰πüÂèØ‰ª•Êää date/time ÂêåÊ≠•ËøáÂéª
        
      });
    }
    holder.appendChild(btn);
  }
}

/** Ëé∑ÂèñÊüêÊºîÂá∫ÊüêÂ§©ÊüêÁ•®ÁßçÁöÑ"Âü∫Á°Ä‰ΩôÁ•®" */
function baseLeft(evKey, dateISO, key){
  const day = (INVENTORY[evKey]||{})[dateISO] || {};
  const fallback = DEFAULT_LEFT[key] ?? 0;
  const v = day[key];
  return (typeof v==='number') ? v : fallback;
}

/** Ê†πÊçÆÂ∑≤ÈÄâÊã©Êï∞ÈáèÔºåÂà∑Êñ∞‰ΩôÁ•®Â≠óÊ†∑ & Êéß‰ª∂ÂèØÁî®ÊÄß */
function refreshLeftForEvent(evKey){
  const dateISO = evState[evKey].date;
  if(!dateISO) return;

  const ids = Array.from(document.querySelectorAll(`input[id^="${evKey}_"]`))
                   .map(i=>i.id);

  ids.forEach(id=>{
    const map = mapIdToKey(id);
    if(!map) return;
    const leftSpan = document.getElementById(`left-${id}`);
    const chosen = parseInt(document.getElementById(id).value||'0',10);
    const left = Math.max(0, baseLeft(map.ev, dateISO, map.key) - chosen);
    if(leftSpan){
      leftSpan.textContent = left>0 ? `Left: ${left}` : 'Sold out';
      leftSpan.style.color = left>0 ? 'var(--gold-d)' : '#c0392b';
      leftSpan.style.fontWeight = '700';
    }
    // ÊéßÂà∂ + ÊåâÈíÆÂèØÁî®ÊÄß
    const plus = document.querySelector(`[data-inc="${id}"]`);
    if(plus) plus.disabled = (left<=0);
  });
}

/** ÈôêÂà∂Êï∞ÈáèÔºö‰∏çÂèØË∂ÖËøáËØ•Êó•‰ΩôÁ•® */
function clampToLeft(id){
  const map = mapIdToKey(id);
  if(!map) return;
  const dateISO = evState[map.ev].date;
  if(!dateISO) return;
  const max = baseLeft(map.ev, dateISO, map.key);
  const input = document.getElementById(id);
  const current = parseInt(input.value||'0',10);
  if(current > max){
    input.value = max;
  }
}

/* ÁªëÂÆö‰Ω†Áé∞ÊúâÁöÑ + / - ÈÄªËæëÂêéÔºåÂÜçËøΩÂä†‰∏ÄÂ±Ç"‰ΩôÁ•®ÈôêÂà∂"ÁöÑÁõëÂê¨ */
document.addEventListener('click', (e)=>{
  const inc = e.target.closest('[data-inc]');
  const dec = e.target.closest('[data-dec]');
  const btn = inc || dec;
  if(!btn) return;
  const id = inc ? inc.dataset.inc : dec.dataset.dec;
  // ÂÖàËÆ©‰Ω†ÂéüÊúâÁöÑ changeQty Ë∑ëÔºàÂÆÉ‰ºö‰øÆÊîπ input ÂÄºÔºâ
  // ÁÑ∂ÂêéÂÜçÈí≥Âà∂Âà∞‰ΩôÁ•®‰∏äÈôêÔºåÂπ∂Âà∑Êñ∞"Left"
  setTimeout(()=>{
    clampToLeft(id);
    const map = mapIdToKey(id);
    if(map) refreshLeftForEvent(map.ev);validateCheckout();
  }, 0);
});

/* ÂΩìÁî®Êà∑ÊâãÂä®ËæìÂÖ•Êï∞Â≠óÊó∂Ôºå‰πüË¶ÅÈí≥Âà∂ */
document.addEventListener('input', (e)=>{
  if(e.target.matches('input[id^="g_"],input[id^="i_"],input[id^="c_"],input[id^="m_"]')){
    clampToLeft(e.target.id);
    const map = mapIdToKey(e.target.id);
    if(map) refreshLeftForEvent(map.ev);validateCheckout();
  }
});


/* ÂàùÂßãÂåñ‰∏â‰∏™Êó•ÂéÜ */

renderEventCalendar('g','cal_g','sel_g','time_g');
renderEventCalendar('i','cal_i','sel_i','time_i');
renderEventCalendar('c','cal_c','sel_c','time_c');
renderEventCalendar('m','cal_m','sel_m','time_m');


  </script>
  
</body>
</html>
