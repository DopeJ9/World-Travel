<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Children‚Äôs Museum Sch√∂nbrunn Palace | Family Tickets & Activities</title>
<meta name="description" content="Children‚Äôs Museum Sch√∂nbrunn Palace ticketing, opening hours, interactive exhibits and family-friendly planning tips.">
<style>
/* Reset */
* { box-sizing: border-box; }
html, body { margin: 0; padding: 0; font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; color: #3b2315; background: #fff4ea; }
a { color: #d35c20cd; text-decoration: none; }
a:hover { text-decoration: underline; }

/* Theme */
:root {
    --brand:#d96a29b7;
    --brand-dark:#9b4215ce;
    --glow:#f6b98f;
    --ember:#c2561cd6;
    --cream:#ffe9d6;
    --rose:#ffd2b3;
}

/* Layout */
header { position: sticky; top: 0; z-index: 20; background: rgba(255,242,230,.95); backdrop-filter: saturate(160%) blur(10px); border-bottom: 1px solid rgba(155,66,21,.12); }
.container { max-width: 1120px; padding: 0 20px; margin: 0 auto; }
.nav { display:flex; align-items:center; justify-content:space-between; height:64px; }
.brand { font-weight: 700; letter-spacing:.4px; color: var(--brand-dark); font-size: 18px; }
.nav a { margin-left: 18px; font-weight:500; color: var(--brand); }

main section { padding: 52px 0; border-bottom:1px solid rgba(155,66,21,.12); }
section h2 { margin:0 0 18px; font-size:26px; color:var(--brand-dark); }
section p { line-height:1.75; margin:0 0 14px; }

.heading-accent { display:inline-flex; align-items:center; gap:12px; font-family: 'Playfair Display', Georgia, serif; color:var(--brand-dark); letter-spacing:.3px; }
.heading-accent::before { content:""; width:36px; height:10px; border-radius:6px; display:inline-block; background:linear-gradient(90deg, #f6b98f 0%, #d96a29 100%); box-shadow:0 3px 10px rgba(217,106,41,.25); }
.heading-accent.center { justify-content:center; width:100%; }
.subheading { font-size:18px; font-weight:700; color:var(--brand-dark); margin:0 0 14px; letter-spacing:.2px; }

.grid { display:grid; grid-template-columns:repeat(12,1fr); gap:18px; }
.col-6 { grid-column: span 6; }
.col-12 { grid-column: span 12; }

@media (max-width: 768px) {
    .grid { grid-template-columns:repeat(6,1fr); }
    .col-6, .col-12 { grid-column: span 6; }
    .nav a { margin-left: 12px; }
}

/* Cover */
.cover { position: relative; border-bottom:1px solid rgba(155,66,21,.14); min-height:200px; max-height:40vh; overflow:hidden; }
.cover img { width:100%; height:100%; object-fit:cover; object-position:center 40%; display:block; }
.cover .overlay { position:absolute; inset:0; background:linear-gradient(180deg, rgba(105,46,15,.35) 0%, rgba(217,106,41,.66) 70%, rgba(88,29,6,.78) 100%); display:flex; align-items:center; justify-content:center; text-align:center; color:#fff8f2; }
.cover .content { padding:16px; max-width:820px; }
.cover .title { font-family:'Playfair Display', Georgia, serif; font-size:34px; margin:0 0 8px; letter-spacing:.5px; text-shadow:0 2px 6px rgba(64,22,4,.52); }
.cover .subtitle { font-size:18px; margin:0; opacity:.95; }

/* Cards */
.section-card { border:1px solid rgba(155,72,27,.18); border-radius:16px; background:#ffffff; box-shadow:0 12px 24px rgba(217,106,41,.08); padding:18px; }
.section-card.fill { display:flex; flex-direction:column; height:100%; background:linear-gradient(180deg,#ffffff 0%,#fff0e3 100%); }
.badge { display:inline-block; padding:6px 12px; border-radius:999px; font-size:12px; font-weight:700; color:#9b4215; background:#f6c28e; }
.section-note { display:flex; align-items:center; gap:12px; padding:12px; border-radius:14px; border:1px solid rgba(179,87,34,.24); background:rgba(246,185,143,.32); color:#7c3614; font-weight:600; margin:8px 0 16px; }
.section-note.small { font-weight:500; padding:10px; margin:8px 0 12px; }
.info-ic { width:20px; height:20px; border-radius:999px; border:1px solid rgba(155,72,27,.22); background:rgba(246,185,143,.3); color:var(--brand); display:inline-flex; align-items:center; justify-content:center; font-size:12px; font-weight:700; }
.info-ic.lg { width:24px; height:24px; font-size:14px; }

/* Opening Hours */
.hours-card { background: linear-gradient(180deg,#ffefde 0%,#ffd8b8 100%); border:1px solid rgba(217,106,41,.24); border-radius:16px; padding:20px; box-shadow:0 10px 22px rgba(217,106,41,.12); }
.hours-flex { display:grid; grid-template-columns:repeat(auto-fit, minmax(220px, 1fr)); gap:16px; }
.hour-box { padding:18px; border-radius:14px; border:1px solid rgba(155,72,27,.2); background:linear-gradient(180deg,#ffffff 0%,#ffe6cd 100%); box-shadow:0 6px 16px rgba(155,72,27,.12); display:flex; flex-direction:column; gap:10px; }
.hour-box.em { background:linear-gradient(180deg,#ffd6b5 0%,#ffbb86 100%); border-color:rgba(217,106,41,.35); }
.hour-title { font-size:14px; font-weight:700; text-transform:uppercase; letter-spacing:.45px; color:#9b4215; }
.hour-time { font-size:22px; font-weight:700; color:#6e2b0f; letter-spacing:.2px; }
.hour-caption { font-size:13px; color:#7a3c1a; }

/* Tickets */
.ticket-list { display:grid; gap:10px; border-top:3px solid rgba(155,66,21,.14); padding-top:12px; }
.ticket-row { display:grid; grid-template-columns:1fr auto auto auto; align-items:center; gap:12px; padding:14px 10px; border:1px solid rgba(155,66,21,.16); border-radius:12px; background:#ffffff; box-shadow:0 6px 14px rgba(155,66,21,.08); }
.ticket-title { display:flex; flex-direction:column; gap:6px; font-weight:600; color:#7a3112; }
.ticket-price { font-weight:800; font-size:18px; color:#d96a29; }
.pill { display:inline-flex; align-items:center; gap:8px; padding:8px 12px; background:#ffe2c8; border-radius:999px; font-size:12px; font-weight:700; color:#7a3112; }
.qty { display:inline-flex; align-items:center; border:1px solid rgba(155,66,21,.24); border-radius:10px; overflow:hidden; }
.qty button { width:40px; height:40px; border:0; background:#fff0e3; color:#9b4215; font-size:18px; cursor:pointer; }
.qty input { width:56px; border:0; text-align:center; font-weight:700; font-size:16px; color:#7a3112; background:#ffffff; }
.cta-primary { display:inline-flex; align-items:center; justify-content:center; gap:8px; padding:14px 24px; border-radius:999px; background:linear-gradient(180deg,#f6b98f 0%, #d96a29 100%); border:0; color:#fff9f4; font-weight:700; font-size:16px; cursor:pointer; box-shadow:0 10px 24px rgba(155,66,21,.22); transition:transform .12s ease, box-shadow .12s ease; }
.cta-primary:hover { transform:translateY(-1px); box-shadow:0 12px 28px rgba(155,66,21,.28); }
.cta-primary:disabled { cursor:not-allowed; opacity:.55; transform:none; box-shadow:none; }

/* Calendar & Slots */
.calendar-block { background: linear-gradient(180deg,#fff1e5 0%,#ffd8b8 100%); border:1px solid rgba(155,66,21,.2); border-radius:16px; padding:14px; box-shadow:0 10px 20px rgba(155,66,21,.1); }
.calendar-head { display:flex; align-items:center; justify-content:center; gap:8px; font-weight:700; color:#7a3716; margin-bottom:10px; }
.calendar-head .cal-btn { width:32px; height:32px; border:1px solid rgba(155,66,21,.24); border-radius:8px; background:#fff5ec; color:#9b4215; font-weight:600; cursor:pointer; }
.calendar-head .cal-btn:disabled { opacity:.4; cursor:not-allowed; }
.calendar { display:grid; grid-template-columns:repeat(7, 1fr); gap:6px; }
.day { display:flex; align-items:center; justify-content:center; padding:0; aspect-ratio:4/3; border-radius:10px; font-weight:600; color:#7a3716; background:#ffffff; border:1px solid rgba(155,66,21,.16); cursor:pointer; transition:background .2s ease, border-color .2s ease, transform .06s; user-select:none; }
.day.header { background:linear-gradient(180deg,#ffe1c5 0%,#ffc79a 100%); color:#9b4215; border:none; cursor:default; font-size:11px; text-transform:uppercase; letter-spacing:.45px; }
.day.disabled { color:#c59b82; background:#fce8d8; cursor:not-allowed; opacity:.75; }
.day:not(.disabled):hover { background:#ffe2c8; border-color:rgba(155,66,21,.3); transform:translateY(-1px); }
.day.selected { outline:3px solid rgba(217,106,41,.55); outline-offset:2px; background:linear-gradient(180deg,#ffbe8c 0%,#f6b98f 100%); border-color:rgba(155,66,21,.4); box-shadow:0 6px 14px rgba(155,66,21,.2); }
.slots { display:grid; grid-template-columns:repeat(auto-fit, minmax(110px,1fr)); gap:10px; margin-top:12px; }
.slot { border-radius:12px; border:1px solid rgba(155,66,21,.18); background:#fff5ec; color:#7a3312; padding:10px 12px; text-align:center; font-weight:600; cursor:pointer; transition:background .2s, transform .1s; }
.slot:hover { background:#ffe2c8; }
.slot.selected { background:linear-gradient(180deg,#f6b98f 0%,#d96a29 100%); color:#fff; border-color:rgba(155,66,21,.35); box-shadow:0 6px 14px rgba(155,66,21,.22); transform:translateY(-1px); }
.slot.disabled { background:#f3d5c4; color:#b78b6f; cursor:not-allowed; text-decoration:line-through; }

/* Tips */
.tips-grid { display:grid; grid-template-columns:repeat(auto-fit, minmax(240px,1fr)); gap:18px; }
.tip-card { border:1px solid rgba(155,66,21,.16); border-radius:12px; background:#ffffff; padding:16px; box-shadow:0 8px 18px rgba(155,66,21,.08); }
.tip-card h4 { margin:0 0 10px; font-size:15px; color:#7a3112; }
.tip-card p { margin:0; font-size:14px; color:#7f3a1d; line-height:1.6; }

/* Footer */
footer { padding:28px 0 42px; text-align:center; background:#fff0e3; color:#7a3716; font-size:13px; border-top:1px solid rgba(155,66,21,.12); }

.muted { color:#7a3b18; font-size:14px; }
</style>
</head>
<body>

<header>
    <div class="container nav">
        <div class="brand">Children‚Äôs Museum Sch√∂nbrunn Palace</div>
        <nav>
            <a href="#hours">Hours</a>
            <a href="#tickets">Tickets</a>
            <a href="#hands-on">Hands-on Zones</a>
            <a href="#tips">Family Tips</a>
        </nav>
    </div>
</header>

<section class="cover" aria-label="Hero image">
    <img src="https://images.unsplash.com/photo-1523475472560-d2df97ec485c?auto=format&fit=crop&w=1600&q=80" alt="Children exploring an interactive museum exhibit">
    <div class="overlay">
        <div class="content">
            <h1 class="title">Discover Imperial Life Through Play</h1>
            <p class="subtitle">Interactive stories, dressing rooms, and adventures for curious explorers aged 6+</p>
        </div>
    </div>
</section>

<main class="container">
    <section id="hours" style="border-bottom:0;">
        <h2 class="heading-accent center">Opening Hours</h2>
        <div class="hours-card">
            <div class="hours-flex">
                <div class="hour-box em">
                    <div class="hour-title">Daily & Public Holidays</div>
                    <div class="hour-time">10:00 ‚Äì 17:00</div>
                    <div class="hour-caption">Last admission at 16:00 ¬∑ All-year access for families</div>
                </div>
            </div>
        </div>
    </section>

    <section id="plan">
        <h2 class="heading-accent center">Plan Your Visit</h2>
        <div class="grid">
            <div class="col-6">
                <div class="section-card fill">
                    <h3 class="subheading">Choose a Date</h3>
                    <div class="calendar-block">
                        <div class="calendar-head">
                            <button id="calendar-prev" class="cal-btn" aria-label="Previous month">‚Äπ</button>
                            <span id="calendar-month-label"></span>
                            <button id="calendar-next" class="cal-btn" aria-label="Next month">‚Ä∫</button>
                        </div>
                        <div class="calendar" id="calendar-grid" aria-live="polite"></div>
                    </div>
                </div>
            </div>
            <div class="col-6">
                <div class="section-card fill">
                    <h3 class="subheading">Pick a Time</h3>
                    
                    <p style="margin-bottom:10px; color:#7a3112;">Selected: <strong id="selected-date">None</strong> ¬∑ <strong id="selected-time">None</strong></p>
                    <div id="slots" class="slots" aria-live="polite"></div>
                    <p id="closed-note" class="muted" style="display:none;">The museum is closed on the chosen date.</p>
                </div>
            </div>
        </div>
    </section>

    <section id="tickets">
        <h2 class="heading-accent center">Family Ticketing</h2>
        <div class="grid">
            <div class="col-12">
                <div class="section-card fill">
                    <h3 class="subheading">Choose Your Tickets</h3>
                    <div class="section-note small"><span class="info-ic lg">‚ÑπÔ∏è</span><span>All tickets include audio story cubes and dressing-room access.</span></div>
                    <div class="ticket-list">
                        <div class="ticket-row" data-ticket="adult" data-label="Adult" data-price="12">
                            <div class="ticket-title">
                                <strong>Adult</strong>
                                <span class="pill"><span class="info-ic">üë™</span>Per accompanying adult</span>
                            </div>
                            <div class="ticket-price">‚Ç¨ 12,00</div>
                            <div class="qty">
                                <button type="button" class="qty-btn minus" data-ticket="adult" aria-label="Decrease adult tickets">‚àí</button>
                                <input id="ticket-adult" value="0" readonly>
                                <button type="button" class="qty-btn plus" data-ticket="adult" aria-label="Increase adult tickets">+</button>
                            </div>
                        </div>
                        <div class="ticket-row" data-ticket="child" data-label="Child (3‚Äì18)" data-price="12">
                            <div class="ticket-title">
                                <strong>Child (3‚Äì18)</strong>
                                <span class="pill"><span class="info-ic">‚òÖ</span>Interactive passport</span>
                            </div>
                            <div class="ticket-price">‚Ç¨ 12,00</div>
                            <div class="qty">
                                <button type="button" class="qty-btn minus" data-ticket="child" aria-label="Decrease child tickets">‚àí</button>
                                <input id="ticket-child" value="0" readonly>
                                <button type="button" class="qty-btn plus" data-ticket="child" aria-label="Increase child tickets">+</button>
                            </div>
                        </div>
                        <div class="ticket-row" data-ticket="card" data-label="Vienna City Card" data-price="11">
                            <div class="ticket-title">
                                <strong>Vienna City Card</strong>
                                <span class="pill"><span class="info-ic">üé´</span>Card holders only</span>
                            </div>
                            <div class="ticket-price">‚Ç¨ 11,00</div>
                            <div class="qty">
                                <button type="button" class="qty-btn minus" data-ticket="card" aria-label="Decrease Vienna City Card tickets">‚àí</button>
                                <input id="ticket-card" value="0" readonly>
                                <button type="button" class="qty-btn plus" data-ticket="card" aria-label="Increase Vienna City Card tickets">+</button>
                            </div>
                        </div>
                        <div class="ticket-row" data-ticket="family1" data-label="Family Pack 1" data-price="30">
                            <div class="ticket-title">
                                <strong>Family Pack 1</strong>
                                <span class="pill"><span class="info-ic">üë®‚Äçüë©‚Äçüëß</span>2 adults + 1 child</span>
                            </div>
                            <div class="ticket-price">‚Ç¨ 30,00</div>
                            <div class="qty">
                                <button type="button" class="qty-btn minus" data-ticket="family1" aria-label="Decrease family pack 1 tickets">‚àí</button>
                                <input id="ticket-family1" value="0" readonly>
                                <button type="button" class="qty-btn plus" data-ticket="family1" aria-label="Increase family pack 1 tickets">+</button>
                            </div>
                        </div>
                        <div class="ticket-row" data-ticket="family2" data-label="Family Pack 2" data-price="40">
                            <div class="ticket-title">
                                <strong>Family Pack 2</strong>
                                <span class="pill"><span class="info-ic">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span>2 adults + 2 children</span>
                            </div>
                            <div class="ticket-price">‚Ç¨ 40,00</div>
                            <div class="qty">
                                <button type="button" class="qty-btn minus" data-ticket="family2" aria-label="Decrease family pack 2 tickets">‚àí</button>
                                <input id="ticket-family2" value="0" readonly>
                                <button type="button" class="qty-btn plus" data-ticket="family2" aria-label="Increase family pack 2 tickets">+</button>
                            </div>
                        </div>
                    </div>
                    <p style="margin-top:auto; color:#7a3112; font-size:14px;">Tots under 3 enter free when accompanied by a paying child. Strollers are welcome; storage cubbies available near the entrance. Expect peak demand weekends 11:00‚Äì14:00.</p>
                </div>
            </div>
        </div>
    </section>
</main>

<section id="summary" style="padding:0 0 60px; background:#fff4ea;">
    <div class="container">
        <div class="section-card" style="text-align:center;">
            <h2 class="heading-accent center" style="margin-bottom:18px;">Booking Summary</h2>
            <p id="booking-summary" style="color:#7a3112; font-size:14px; line-height:1.7; margin-bottom:20px;">
                Choose a date, time, and ticket mix to view your total before checkout.
            </p>
            <div style="display:flex; justify-content:center; gap:16px; flex-wrap:wrap;">
                <button id="book-now" class="cta-primary" disabled>üßæ Book This Visit</button>
                <button id="book-bottom" class="cta-primary" disabled>‚úîÔ∏è Complete Booking</button>
            </div>
        </div>
    </div>
</section>

<footer>
    ¬© <span id="year"></span> Children‚Äôs Museum Sch√∂nbrunn Palace ¬∑ Family Explorers Hub
</footer>

<script>
(function(){
    const yearSpan = document.getElementById('year');
    if (yearSpan) {
        yearSpan.textContent = new Date().getFullYear();
    }

    const calendarGrid = document.getElementById('calendar-grid');
    if (!calendarGrid) return;

    const calendarPrev = document.getElementById('calendar-prev');
    const calendarNext = document.getElementById('calendar-next');
    const calendarMonthLabel = document.getElementById('calendar-month-label');
    const slotsWrap = document.getElementById('slots');
    const closedNote = document.getElementById('closed-note');
    const selectedDateText = document.getElementById('selected-date');
    const selectedTimeText = document.getElementById('selected-time');
    const bookingSummaryEl = document.getElementById('booking-summary');
    const bookNowBtn = document.getElementById('book-now');
    const bookBottomBtn = document.getElementById('book-bottom');
    const ticketRows = Array.from(document.querySelectorAll('.ticket-row[data-ticket]'));
    const ticketInputs = {};
    const ticketMeta = {};

    const today = new Date();
    const todayDate = new Date(today.getFullYear(), today.getMonth(), today.getDate());

    const MONTH_NAMES = ['January','February','March','April','May','June','July','August','September','October','November','December'];
    const WEEK_HEADERS = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];

    const CAL_MONTH = 7; // August (0-based)
    const CAL_YEAR = today.getMonth() > CAL_MONTH ? today.getFullYear() + 1 : today.getFullYear();

    let viewYear = CAL_YEAR;
    let viewMonth = CAL_MONTH;
    let selectedDate = null;
    let selectedTime = null;

    function pad(num){ return String(num).padStart(2,'0'); }

    function isPastDate(year, month, day){
        const date = new Date(year, month, day);
        return date < todayDate;
    }

    function buildCalendar(){
        calendarGrid.innerHTML = '';
        calendarMonthLabel.textContent = `${MONTH_NAMES[viewMonth]} ${viewYear}`;
        calendarGrid.setAttribute('aria-label', `${MONTH_NAMES[viewMonth]} ${viewYear} calendar`);

        WEEK_HEADERS.forEach(header=>{
            const cell = document.createElement('div');
            cell.className = 'day header';
            cell.textContent = header;
            calendarGrid.appendChild(cell);
        });

        const firstDay = new Date(viewYear, viewMonth, 1);
        const startWeekday = firstDay.getDay();
        for (let i=0;i<startWeekday;i++){
            const blank = document.createElement('div');
            blank.className = 'day disabled';
            blank.textContent = '';
            calendarGrid.appendChild(blank);
        }

        const daysInMonth = new Date(viewYear, viewMonth + 1, 0).getDate();
        for (let day=1; day<=daysInMonth; day++){
        const cell = document.createElement('div');
        cell.className = 'day';
        cell.textContent = String(day);
        cell.setAttribute('data-day', String(day));

        if (isPastDate(viewYear, viewMonth, day)){
            cell.classList.add('disabled');
        } else {
            cell.setAttribute('role','button');
            cell.tabIndex = 0;
            cell.addEventListener('click', ()=> selectDate(day));
            cell.addEventListener('keydown', (evt)=>{
                if (evt.key === 'Enter' || evt.key === ' '){
                    evt.preventDefault();
                    selectDate(day);
                }
            });
        }

        if (selectedDate && selectedDate.getFullYear() === viewYear && selectedDate.getMonth() === viewMonth && selectedDate.getDate() === day){
            cell.classList.add('selected');
        }

        calendarGrid.appendChild(cell);
        }

        if (calendarPrev) calendarPrev.disabled = true;
        if (calendarNext) calendarNext.disabled = true;
    }

    function selectDate(day){
        if (isPastDate(viewYear, viewMonth, day)) return;
        selectedDate = new Date(viewYear, viewMonth, day);
        selectedTime = null;
        selectedDateText.textContent = `${MONTH_NAMES[selectedDate.getMonth()]} ${selectedDate.getDate()}, ${selectedDate.getFullYear()}`;
        selectedTimeText.textContent = 'None';
        buildCalendar();
        buildSlots();
        updateBookingState();
    }

    function adjustTicket(ticketId, delta){
        const input = ticketInputs[ticketId];
        if (!input) return;
        const newValue = Math.max(0, (parseInt(input.value, 10) || 0) + delta);
        input.value = String(newValue);
        const row = document.querySelector(`.ticket-row[data-ticket="${ticketId}"]`);
        if (row){
            const minusBtn = row.querySelector('.qty-btn.minus');
            if (minusBtn) minusBtn.disabled = newValue === 0;
        }
        updateBookingState();
    }

    function getTicketData(){
        let totalQty = 0;
        let totalPrice = 0;
        const lines = [];
        Object.entries(ticketInputs).forEach(([ticketId, input])=>{
            const qty = parseInt(input.value, 10) || 0;
            if (!qty) return;
            const meta = ticketMeta[ticketId];
            totalQty += qty;
            totalPrice += qty * meta.price;
            lines.push(`${qty} √ó ${meta.label} (‚Ç¨${meta.price.toFixed(2)})`);
        });
        return { totalQty, totalPrice, lines };
    }

    function buildSlots(){
        slotsWrap.innerHTML = '';
        closedNote.style.display = 'none';

        if (!selectedDate){
            return;
        }

        const OPEN_MINUTES = 10 * 60;   // 10:00
        const LAST_ENTRY_MINUTES = 16 * 60; // 16:00

        for (let minutes = OPEN_MINUTES; minutes <= LAST_ENTRY_MINUTES; minutes += 15){
            const hour = Math.floor(minutes / 60);
            const minute = minutes % 60;
            const label = `${pad(hour)}:${pad(minute)}`;

            const btn = document.createElement('button');
            btn.type = 'button';
            btn.className = 'slot';
            btn.textContent = label;
            btn.addEventListener('click', ()=>{
                selectedTime = label;
                selectedTimeText.textContent = label;
                Array.from(slotsWrap.querySelectorAll('.slot')).forEach(slot=> slot.classList.remove('selected'));
                btn.classList.add('selected');
                updateBookingState();
            });

            if (selectedTime === label){
                btn.classList.add('selected');
            }

            slotsWrap.appendChild(btn);
        }
    }

    if (calendarPrev) calendarPrev.style.display = 'none';
    if (calendarNext) calendarNext.style.display = 'none';

    function updateBookingState(){
        const dateDisplay = selectedDate ? `${MONTH_NAMES[selectedDate.getMonth()]} ${selectedDate.getDate()}, ${selectedDate.getFullYear()}` : 'Select a date';
        const timeDisplay = selectedTime || 'Select a time';
        if (bookingSummaryEl){
            const { totalQty, totalPrice, lines } = getTicketData();
            const ticketsLine = lines.length ? lines.join(', ') : 'Select tickets to see your total.';
            const totalLine = lines.length ? `Total: ‚Ç¨${totalPrice.toFixed(2)}` : '';
            bookingSummaryEl.innerHTML = [
                `Date: ${dateDisplay}`,
                `Time: ${timeDisplay}`,
                `Tickets: ${ticketsLine}`,
                totalLine
            ].filter(Boolean).join('<br>');
        }
        const { totalQty, totalPrice } = getTicketData();
        const ready = !!selectedDate && !!selectedTime && totalQty > 0;
        [bookNowBtn, bookBottomBtn].forEach(btn=>{
            if (!btn) return;
            btn.disabled = !ready;
        });
    }

    function handleBooking(action){
        if (!selectedDate || !selectedTime) return;
        const { lines, totalPrice } = getTicketData();
        const ticketsText = lines.length ? lines.join('\n') : 'No tickets selected.';
        const message = `${action}\n\nDate: ${selectedDateText.textContent}\nTime: ${selectedTimeText.textContent}\n\nTickets:\n${ticketsText}\n\nTotal: ‚Ç¨${totalPrice.toFixed(2)}`;
        alert(message);
    }

    if (bookNowBtn){
        bookNowBtn.addEventListener('click', ()=> handleBooking('Proceeding to checkout...'));
    }

    if (bookBottomBtn){
        bookBottomBtn.addEventListener('click', ()=> handleBooking('Booking confirmed!'));
    }

    ticketRows.forEach(row=>{
        const ticketId = row.dataset.ticket;
        const label = row.dataset.label || ticketId;
        const price = parseFloat(row.dataset.price || '0');
        const input = row.querySelector('input');
        if (!ticketId || !input) return;
        ticketInputs[ticketId] = input;
        ticketMeta[ticketId] = { label, price };
        const minusBtn = row.querySelector('.qty-btn.minus');
        const plusBtn = row.querySelector('.qty-btn.plus');
        if (minusBtn){
            minusBtn.addEventListener('click', ()=> adjustTicket(ticketId, -1));
            minusBtn.disabled = true;
        }
        if (plusBtn){
            plusBtn.addEventListener('click', ()=> adjustTicket(ticketId, 1));
        }
    });

    buildCalendar();
    let defaultDay = 1;
    if (viewYear === today.getFullYear() && viewMonth === today.getMonth()){
        defaultDay = today.getDate();
    }
    if (isPastDate(viewYear, viewMonth, defaultDay)){
        defaultDay = today.getDate();
    }
    selectDate(defaultDay);
    updateBookingState();
})();
</script>
</body>
</html>

